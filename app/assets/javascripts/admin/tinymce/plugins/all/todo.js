/***************************
 File generated by shrinker.ch
 DateTime: 2015-03-24, 00:02:45
 File list:
 * plugin.min%20(1).js
 * plugin.min%20(3).js
 * plugin.min%20(4).js
 * plugin.min.js
 * plugin.min%20(8).js
 * plugin.min%20(5).js
 * plugin.min%20(6).js
 * plugin.min%20(7).js
 * plugin.min%20(10).js
 * plugin.min%20(11).js
 * plugin.min%20(12).js
 * plugin.min%20(13).js
 * plugin.min%20(9).js
 * plugin.min%20(14).js
 * plugin.min%20(15).js
 * plugin.min%20(16).js
 * plugin.min%20(17).js
 * plugin.min%20(2).js
 * plugin.min%20(18).js
 * plugin.min%20(19).js
 * plugin.min%20(20).js
 * plugin.min%20(24).js
 * plugin.min%20(25).js
 * plugin.min%20(26).js
 * plugin.min%20(27).js
 * plugin.min%20(23).js
 * plugin.min%20(28).js
 * plugin.min%20(29).js
 * plugin.min%20(21).js
 * plugin.min%20(22).js
 * plugin.min%20(30).js
 * plugin.min%20(32).js
 * plugin.min%20(33).js
 * plugin.min%20(31).js
 * plugin.min%20(35).js
 * plugin.min%20(36).js
 * plugin.min%20(34).js
 * plugin.min%20(38).js
 * plugin.min%20(37).js
 * plugin.min%20(39).js
 * plugin.min%20(42).js
 * plugin.min%20(40).js
 * plugin.min%20(41).js
 *****************************/
tinymce.PluginManager.add("pagebreak",function(a){var z=a.getParam("pagebreak_separator","<\!-- pagebreak --\>"),H=RegExp(z.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(B){return"\\"+B}),"gi"),y='<img src="'+tinymce.Env.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" />';a.addCommand("mcePageBreak",function(){a.insertContent(a.settings.pagebreak_split_block?"<p>"+y+"</p>":y)});a.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"});a.addMenuItem("pagebreak",{text:"Page break",
    icon:"pagebreak",cmd:"mcePageBreak",context:"insert"});a.on("ResolveName",function(B){"IMG"==B.target.nodeName&&a.dom.hasClass(B.target,"mce-pagebreak")&&(B.name="pagebreak")});a.on("click",function(B){B=B.target;"IMG"===B.nodeName&&a.dom.hasClass(B,"mce-pagebreak")&&a.selection.select(B)});a.on("BeforeSetContent",function(B){B.content=B.content.replace(H,y)});a.on("PreInit",function(){a.serializer.addNodeFilter("img",function(B){for(var m,t,o=B.length;o--;)if(m=B[o],t=m.attr("class"),t&&-1!==t.indexOf("mce-pagebreak")){var c=
    m.parent;if(a.schema.getBlockElements()[c.name]&&a.settings.pagebreak_split_block){c.type=3;c.value=z;c.raw=true;m.remove()}else{m.type=3;m.value=z;m.raw=true}}})})});
tinymce.PluginManager.add("preview",function(a){var z=a.settings,H=!tinymce.Env.ie;a.addCommand("mcePreview",function(){a.windowManager.open({title:"Preview",width:parseInt(a.getParam("plugin_preview_width","650"),10),height:parseInt(a.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(H?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var y,B="";B+='<base href="'+
a.documentBaseURI.getURI()+'">';tinymce.each(a.contentCSS,function(t){B+='<link type="text/css" rel="stylesheet" href="'+a.documentBaseURI.toAbsolute(t)+'">'});y=z.body_id||"tinymce";-1!=y.indexOf("=")&&(y=a.getParam("body_id","","hash"),y=y[a.id]||y);var m=z.body_class||"";-1!=m.indexOf("=")&&(m=a.getParam("body_class","","hash"),m=m[a.id]||"");if(y="<!DOCTYPE html><html><head>"+B+'</head><body id="'+y+'" class="mce-content-body '+m+'"'+(a.settings.directionality?' dir="'+a.settings.directionality+
    '"':"")+">"+a.getContent()+"</body></html>",H)this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(y);else{m=this.getEl("body").firstChild.contentWindow.document;m.open();m.write(y);m.close()}}})});a.addButton("preview",{title:"Preview",cmd:"mcePreview"});a.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})});
tinymce.PluginManager.add("print",function(a){a.addCommand("mcePrint",function(){a.getWin().print()});a.addButton("print",{title:"Print",cmd:"mcePrint"});a.addShortcut("Meta+P","","mcePrint");a.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Meta+P",context:"file"})});
tinymce.PluginManager.add("noneditable",function(a){function z(j){var e;if(1===j.nodeType){if(e=j.getAttribute(b),e&&"inherit"!==e)return e;if(e=j.contentEditable,"inherit"!==e)return e}return null}function H(j){for(var e;j;){if(e=z(j))return"false"===e?j:null;j=j.parentNode}}function y(){function j(r){for(;r;){if(r.id===C)return r;r=r.parentNode}}function e(r){var d;if(r){d=new c(r,r);for(r=d.current();r;r=d.next())if(3===r.nodeType)return r}}function g(r,d){var p,h;return"false"===z(r)&&A.isBlock(r)?
    void w.select(r):(h=A.createRng(),"true"===z(r)&&(r.firstChild||r.appendChild(a.getDoc().createTextNode("\u00a0")),r=r.firstChild,d=true),p=A.create("span",{id:C,"data-mce-bogus":true},q),d?r.parentNode.insertBefore(p,r):A.insertAfter(p,r),h.setStart(p.firstChild,1),h.collapse(true),w.setRng(h),p)}function i(r){var d,p;if(r){d=w.getRng(true);d.setStartBefore(r);d.setEndBefore(r);(p=e(r))&&p.nodeValue.charAt(0)==q&&p.deleteData(0,1);A.remove(r,true);w.setRng(d)}else for(;(r=A.get(C))&&r!==d;){(p=e(r))&&
p.nodeValue.charAt(0)==q&&p.deleteData(0,1);A.remove(r,true);d=r}}function k(){function r(l,D){var x,u,v;if(x=n.startContainer,u=n.startOffset,3==x.nodeType){if(v=x.nodeValue.length,u>0&&v>u||(D?u==v:0===u))return}else{if(!(u<x.childNodes.length))return D?null:l;x=x.childNodes[!D&&u>0?u-1:u];x.hasChildNodes()&&(x=x.firstChild)}for(x=new c(x,l);u=x[D?"prev":"next"]();){if(3===u.nodeType&&u.nodeValue.length>0)return;if("true"===z(u))return u}return l}var d,p,h,n,s;i();h=w.isCollapsed();d=H(w.getStart());
    p=H(w.getEnd());(d||p)&&(n=w.getRng(true),h?(d=d||p,(s=r(d,true))?g(s,true):(s=r(d,false))?g(s,false):w.select(d)):(n=w.getRng(true),d&&n.setStartBefore(d),p&&n.setEndAfter(p),w.setRng(n)))}var A=a.dom,w=a.selection,C="mce_noneditablecaret",q="\ufeff";a.on("mousedown",function(r){var d=a.selection.getNode();d&&-1!==d.className.indexOf("mceTmpParagraph")&&d!==r.target&&(" "===d.innerHTML||""===d.innerHTML||" "===d.innerHTML?A.remove(d):d.className=d.className.replace("mceTmpParagraph",""));"false"===
z(d)&&d==r.target&&k()});a.on("mouseup",k);a.on("keydown",function(r){function d(v,E){for(;v=v[E?"previousSibling":"nextSibling"];)if(3!==v.nodeType||v.nodeValue.length>0)return v}function p(v,E){w.select(v);w.collapse(E)}function h(v){function E(I){for(var M=J;M;){if(M===I)return;M=M.parentNode}A.remove(I);k()}function F(){var I,M,N=a.schema.getNonEmptyElements();for(M=new tinymce.dom.TreeWalker(J,a.getBody());(I=v?M.prev():M.next())&&!N[I.nodeName.toLowerCase()]&&!(3===I.nodeType&&tinymce.trim(I.nodeValue).length>
0);)if("false"===z(I))return E(I),true;return H(I)?true:false}var G,J,K,L;if(w.isCollapsed()){if(G=w.getRng(true),J=G.startContainer,K=G.startOffset,J=j(J)||J,L=H(J))return E(L),false;if(3==J.nodeType&&(v?K>0:K<J.nodeValue.length))return true;if(1==J.nodeType&&(J=J.childNodes[K]||J),F())return false}return true}var n,s,l=r.keyCode;k();s=w.getStart();n=w.getEnd();n=H(s)||H(n);var D=a.selection.getNode(),x=l==f.LEFT||l==f.RIGHT||l==f.UP||l==f.DOWN,u=l==f.LEFT||l==f.UP;if(n&&(112>l||l>124)&&l!=f.DELETE&&
    l!=f.BACKSPACE){if(!((tinymce.isMac?r.metaKey:r.ctrlKey)&&(67==l||88==l||86==l)))if(r.preventDefault(),x)if(a.dom.isBlock(n)){r=u?n.previousSibling:n.nextSibling;if(!r||r&&"false"===z(r)){l=A.create("p",null," ");l.className="mceTmpParagraph";(D=u?n:r)&&D.parentNode?D.parentNode.insertBefore(l,D):r||u||n.parentNode.appendChild(l);r=l}n=new c(r,r);n=u?n.prev():n.next();p(n,!u)}else p(n,u)}else if(x||l==f.BACKSPACE||l==f.DELETE){if(s=j(s)){if(l==f.LEFT||l==f.BACKSPACE)if(n=d(s,true),n&&"false"===
    z(n)){if(r.preventDefault(),l!=f.LEFT)return void A.remove(n);p(n,true)}else i(s);if(l==f.RIGHT||l==f.DELETE)if(n=d(s,true),n&&"false"===z(n)){if(r.preventDefault(),l!=f.RIGHT)return void A.remove(n);p(n,false)}else i(s)}else{if(x&&D&&-1!==D.className.indexOf("mceTmpParagraph")&&D[u?"previousSibling":"nextSibling"]){s=D[u?"previousSibling":"nextSibling"];" "===D.innerHTML||""===D.innerHTML||" "===D.innerHTML?A.remove(D):D.className=D.className.replace("mceTmpParagraph","");p(s,!u)}u=w.getRng(true);
    D=u.endContainer;if(A.isBlock(D)&&A.isBlock(D.nextSibling)&&1==u.endOffset&&l==f.DELETE&&(n=H(D.nextSibling)),n&&(l==f.DELETE||l==f.BACKSPACE)&&A.isBlock(n))return r.preventDefault(),void A.remove(n)}if((l==f.BACKSPACE||l==f.DELETE)&&!h(l==f.BACKSPACE))return r.preventDefault(),false}})}function B(j){var e=o.length,g=j.content,i=tinymce.trim(t);if("raw"!=j.format){for(;e--;)g=g.replace(o[e],function(k){var A=arguments,w=A[A.length-2];return w>0&&'"'==g.charAt(w-1)?k:'<span class="'+i+'" data-mce-content="'+
a.dom.encode(A[0])+'">'+a.dom.encode("string"==typeof A[1]?A[1]:A[0])+"</span>"});j.content=g}}var m,t,o,c=tinymce.dom.TreeWalker,b="data-mce-contenteditable",f=tinymce.util.VK;m=" "+tinymce.trim(a.getParam("noneditable_editable_class","mceEditable"))+" ";t=" "+tinymce.trim(a.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";(o=a.getParam("noneditable_regexp"))&&!o.length&&(o=[o]);a.on("PreInit",function(){y();o&&a.on("BeforeSetContent",B);a.parser.addAttributeFilter("class",function(j){for(var e,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  g,i=j.length;i--;){g=j[i];e=" "+g.attr("class")+" ";-1!==e.indexOf(m)?g.attr(b,"true"):-1!==e.indexOf(t)&&g.attr(b,"false")}});a.serializer.addAttributeFilter(b,function(j){for(var e,g=j.length;g--;){e=j[g];o&&e.attr("data-mce-content")?(e.name="#text",e.type=3,e.raw=true,e.value=e.attr("data-mce-content")):(e.attr("contenteditable",null),e.attr(b,null))}});a.parser.addAttributeFilter("contenteditable",function(j){for(var e,g=j.length;g--;){e=j[g];e.attr(b,e.attr("contenteditable"));e.attr("contenteditable",
    null)}})});a.on("drop",function(j){H(j.target)&&j.preventDefault()})});
tinymce.PluginManager.add("tabfocus",function(a){function z(t){9!==t.keyCode||t.ctrlKey||t.altKey||t.metaKey||t.preventDefault()}function H(t){function o(e){function g(k){return"BODY"===k.nodeName||"hidden"!=k.type&&"none"!=k.style.display&&"hidden"!=k.style.visibility&&g(k.parentNode)}function i(k){return/INPUT|TEXTAREA|BUTTON/.test(k.tagName)&&tinymce.get(t.id)&&-1!=k.tabIndex&&g(k)}if(b=y.select(":input:enabled,*[tabindex]:not(iframe)"),B(b,function(k,A){return k.id==a.id?(c=A,false):void 0}),
    e>0)for(j=c+1;j<b.length;j++){if(i(b[j]))return b[j]}else for(j=c-1;j>=0;j--)if(i(b[j]))return b[j];return null}var c,b,f,j;if(!(9!==t.keyCode||t.ctrlKey||t.altKey||t.metaKey||t.isDefaultPrevented())&&(f=m(a.getParam("tab_focus",a.getParam("tabfocus_elements",":prev,:next"))),1==f.length&&(f[1]=f[0],f[0]=":prev"),b=t.shiftKey?":prev"==f[0]?o(-1):y.get(f[0]):":next"==f[1]?o(1):y.get(f[1]))){f=tinymce.get(b.id||b.name);b.id&&f?f.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus();
    b.focus()},10);t.preventDefault()}}var y=tinymce.DOM,B=tinymce.each,m=tinymce.explode;a.on("init",function(){a.inline&&tinymce.DOM.setAttrib(a.getBody(),"tabIndex",null);a.on("keyup",z);tinymce.Env.gecko?a.on("keypress keydown",H):a.on("keydown",H)})});
tinymce.PluginManager.add("save",function(a){function z(){var H=this;a.on("nodeChange",function(){H.disabled(a.getParam("save_enablewhendirty",true)&&!a.isDirty())})}a.addCommand("mceSave",function(){var H;return H=tinymce.DOM.getParent(a.id,"form"),!a.getParam("save_enablewhendirty",true)||a.isDirty()?(tinymce.triggerSave(),a.getParam("save_onsavecallback")?void(a.execCallback("save_onsavecallback",a)&&(a.startContent=tinymce.trim(a.getContent({format:"raw"})),a.nodeChanged())):void(H?(a.isNotDirty=
    true,(!H.onsubmit||H.onsubmit())&&("function"==typeof H.submit?H.submit():a.windowManager.alert("Error: Form submit field collision.")),a.nodeChanged()):a.windowManager.alert("Error: No form element found."))):void 0});a.addCommand("mceCancel",function(){var H=tinymce.trim(a.startContent);return a.getParam("save_oncancelcallback")?void a.execCallback("save_oncancelcallback",a):(a.setContent(H),a.undoManager.clear(),void a.nodeChanged())});a.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",
    disabled:true,onPostRender:z});a.addButton("cancel",{text:"Cancel",icon:false,cmd:"mceCancel",disabled:true,onPostRender:z});a.addShortcut("Meta+S","","mceSave")});
(function(){function a(z,H,y,B,m){function t(w,C){if(C=C||0,!w[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var q=w.index;if(C>0){var r=w[C];if(!r)throw"Invalid capture group";q+=w[0].indexOf(r);w[0]=r}return[q,q+w[0].length,[w[0]]]}function o(w){var C;if(3===w.nodeType)return w.data;if(g[w.nodeName]&&!e[w.nodeName])return"";if(C="",(e[w.nodeName]||i[w.nodeName])&&(C+="\n"),w=w.firstChild){do C+=o(w);while(w=w.nextSibling)}return C}function c(w,C,q){var r,d,p,h,n=[],s=0,l=w,D=
    C.shift(),x=0;a:for(;;){if((e[l.nodeName]||i[l.nodeName])&&s++,3===l.nodeType&&(!d&&l.length+s>=D[1]?(d=l,h=D[1]-s):r&&n.push(l),!r&&l.length+s>D[0]&&(r=l,p=D[0]-s),s+=l.length),r&&d){if(l=q({startNode:r,startNodeIndex:p,endNode:d,endNodeIndex:h,innerNodes:n,match:D[2],matchIndex:x}),s-=d.length-h,r=null,d=null,n=[],D=C.shift(),x++,!D)break}else{if((!g[l.nodeName]||e[l.nodeName])&&l.firstChild){l=l.firstChild;continue}if(l.nextSibling){l=l.nextSibling;continue}}for(;;){if(l.nextSibling){l=l.nextSibling;
    break}if(l.parentNode===w)break a;l=l.parentNode}}}function b(w){var C;if("function"!=typeof w){var q=w.nodeType?w:j.createElement(w);C=function(r,d){var p=q.cloneNode(false);return p.setAttribute("data-mce-index",d),r&&p.appendChild(j.createTextNode(r)),p}}else C=w;return function(r){var d,p,h,n=r.startNode,s=r.endNode,l=r.matchIndex;if(n===s){h=n.parentNode;r.startNodeIndex>0&&(d=j.createTextNode(n.data.substring(0,r.startNodeIndex)),h.insertBefore(d,n));d=C(r.match[0],l);return h.insertBefore(d,
    n),r.endNodeIndex<n.length&&(p=j.createTextNode(n.data.substring(r.endNodeIndex)),h.insertBefore(p,n)),n.parentNode.removeChild(n),d}d=j.createTextNode(n.data.substring(0,r.startNodeIndex));p=j.createTextNode(s.data.substring(r.endNodeIndex));for(var D=C(n.data.substring(r.startNodeIndex),l),x=[],u=0,v=r.innerNodes.length;v>u;++u){var E=r.innerNodes[u],F=C(E.data,l);E.parentNode.replaceChild(F,E);x.push(F)}r=C(s.data.substring(0,r.endNodeIndex),l);return h=n.parentNode,h.insertBefore(d,n),h.insertBefore(D,
    n),h.removeChild(n),h=s.parentNode,h.insertBefore(r,s),h.insertBefore(p,s),h.removeChild(s),r}}var f,j,e,g,i,k=[],A=0;if(j=H.ownerDocument,e=m.getBlockElements(),g=m.getWhiteSpaceElements(),i=m.getShortEndedElements(),f=o(H)){if(z.global)for(;m=z.exec(f);)k.push(t(m,B));else{m=f.match(z);k.push(t(m,B))}return k.length&&(A=k.length,c(H,k,b(y))),A}}tinymce.PluginManager.add("searchreplace",function(z){function H(){function b(){e.statusbar.find("#next").disabled(!m(c+1).length);e.statusbar.find("#prev").disabled(!m(c-
1).length)}function f(){tinymce.ui.MessageBox.alert("Could not find the specified string.",function(){e.find("#find")[0].focus()})}var j={},e=tinymce.ui.Factory.create({type:"window",layout:"flex",pack:"center",align:"center",onClose:function(){z.focus();o.done()},onSubmit:function(g){var i,k,A,w;return g.preventDefault(),k=e.find("#case").checked(),w=e.find("#words").checked(),A=e.find("#find").value(),A.length?j.text==A&&j.caseState==k&&j.wholeWord==w?0===m(c+1).length?void f():(o.next(),void b()):
    (i=o.find(A,k,w),i||f(),e.statusbar.items().slice(1).disabled(0===i),b(),void(j={text:A,caseState:k,wholeWord:w})):(o.done(false),void e.statusbar.items().slice(1).disabled(true))},buttons:[{text:"Find",onclick:function(){e.submit()}},{text:"Replace",disabled:true,onclick:function(){o.replace(e.find("#replace").value())||(e.statusbar.items().slice(1).disabled(true),c=-1,j={})}},{text:"Replace all",disabled:true,onclick:function(){o.replace(e.find("#replace").value(),true,true);e.statusbar.items().slice(1).disabled(true);
    j={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:true,onclick:function(){o.prev();b()}},{text:"Next",name:"next",disabled:true,onclick:function(){o.next();b()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:z.selection.getNode().src},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",
    label:" "}]}}).renderTo().reflow()}function y(b){b=b.getAttribute("data-mce-index");return"number"==typeof b?""+b:b}function B(b){var f=b.parentNode;b.firstChild&&f.insertBefore(b.firstChild,b);b.parentNode.removeChild(b)}function m(b){var f,j=[];if(f=tinymce.toArray(z.getBody().getElementsByTagName("span")),f.length)for(var e=0;e<f.length;e++){var g=y(f[e]);null!==g&&g.length&&g===b.toString()&&j.push(f[e])}return j}function t(b){var f=c,j=z.dom;b!==false?f++:f--;j.removeClass(m(c),"mce-match-marker-selected");
    b=m(f);return b.length?(j.addClass(m(f),"mce-match-marker-selected"),z.selection.scrollIntoView(b[0]),f):-1}var o=this,c=-1;o.init=function(b){b.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:H,separator:"before",context:"edit"});b.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:H});b.addCommand("SearchReplace",H);b.shortcuts.add("Meta+F","",H)};o.find=function(b,f,j){b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");b=RegExp(j?
"\\b"+b+"\\b":b,f?"g":"gi");var e,g;b=(g=z.dom.create("span",{"data-mce-bogus":1}),g.className="mce-match-marker",e=z.getBody(),o.done(false),a(b,e,g,false,z.schema));return b&&(c=-1,c=t(true)),b};o.next=function(){var b=t(true);-1!==b&&(c=b)};o.prev=function(){var b=t(false);-1!==b&&(c=b)};o.replace=function(b,f,j){var e,g,i,k,A,w=c;f=f!==false;e=z.getBody();g=tinymce.toArray(e.getElementsByTagName("span"));for(e=0;e<g.length;e++){var C=y(g[e]);if(null!==C&&C.length)if(i=k=parseInt(C,10),j||i===
    c){if(b.length){g[e].firstChild.nodeValue=b;B(g[e])}else{var q=g[e];q.parentNode.removeChild(q)}for(;g[++e];)if(i=y(g[e]),null!==C&&C.length){if(i!==k){e--;break}q=g[e];q.parentNode.removeChild(q)}f&&w--}else k>c&&g[e].setAttribute("data-mce-index",k-1)}return z.undoManager.add(),c=w,f?(m(w+1),o.next()):(A=m(w-1).length>0,o.prev()),!j&&A};o.done=function(b){var f,j,e,g;j=tinymce.toArray(z.getBody().getElementsByTagName("span"));for(f=0;f<j.length;f++){var i=y(j[f]);null!==i&&i.length&&(i===c.toString()&&
(e||(e=j[f].firstChild),g=j[f].firstChild),B(j[f]))}if(e&&g){f=z.dom.createRng();return f.setStart(e,0),f.setEnd(g,g.data.length),b!==false&&z.selection.setRng(f),f}}})})();
(function(a,z){function H(m,t){for(var o,c=[],b=0;b<m.length;++b){var f;if(!(f=B[m[b]]))a:{f=a;for(var j=m[b].split(/[.\/]/),e=0;e<j.length;++e){if(!f[j[e]]){f=void 0;break a}f=f[j[e]]}}if(o=f,!o)throw"module definition dependecy not found: "+m[b];c.push(o)}t.apply(null,c)}function y(m,t,o){if("string"!=typeof m)throw"invalid module definition, module id must be defined and be a string";if(t===z)throw"invalid module definition, dependencies must be specified";if(o===z)throw"invalid module definition, definition function must be specified";
    H(t,function(){B[m]=o.apply(null,arguments)})}var B={};y("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){return function(m,t){function o(h,n){if(!h[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:h.index,end:h.index+h[0].length,text:h[0],data:n}}function c(h){var n;if(3===h.nodeType)return h.data;if(q[h.nodeName]&&!C[h.nodeName])return"";if(n="",(C[h.nodeName]||r[h.nodeName])&&(n+="\n"),h=h.firstChild){do n+=c(h);while(h=h.nextSibling)}return n}function b(h,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         n,s){var l,D,x,u,v,E=[],F=0,G=h,J=0;n=n.slice(0);n.sort(function(K,L){return K.start-L.start});v=n.shift();a:for(;;){if((C[G.nodeName]||r[G.nodeName])&&F++,3===G.nodeType&&(!D&&G.length+F>=v.end?(D=G,u=v.end-F):l&&E.push(G),!l&&G.length+F>v.start&&(l=G,x=v.start-F),F+=G.length),l&&D){if(G=s({startNode:l,startNodeIndex:x,endNode:D,endNodeIndex:u,innerNodes:E,match:v.text,matchIndex:J}),F-=D.length-u,l=null,D=null,E=[],v=n.shift(),J++,!v)break}else{if((!q[G.nodeName]||C[G.nodeName])&&G.firstChild){G=
    G.firstChild;continue}if(G.nextSibling){G=G.nextSibling;continue}}for(;;){if(G.nextSibling){G=G.nextSibling;break}if(G.parentNode===h)break a;G=G.parentNode}}}function f(h){function n(s,l){var D=d[l];D.stencil||(D.stencil=h(D));D=D.stencil.cloneNode(false);return D.setAttribute("data-mce-index",l),s&&D.appendChild(p.doc.createTextNode(s)),D}return function(s){var l,D,x,u=s.startNode,v=s.endNode,E=s.matchIndex,F=p.doc;if(u===v){x=u.parentNode;s.startNodeIndex>0&&(l=F.createTextNode(u.data.substring(0,
    s.startNodeIndex)),x.insertBefore(l,u));l=n(s.match,E);return x.insertBefore(l,u),s.endNodeIndex<u.length&&(D=F.createTextNode(u.data.substring(s.endNodeIndex)),x.insertBefore(D,u)),u.parentNode.removeChild(u),l}l=F.createTextNode(u.data.substring(0,s.startNodeIndex));D=F.createTextNode(v.data.substring(s.endNodeIndex));F=n(u.data.substring(s.startNodeIndex),E);for(var G=[],J=0,K=s.innerNodes.length;K>J;++J){var L=s.innerNodes[J],I=n(L.data,E);L.parentNode.replaceChild(I,L);G.push(I)}s=n(v.data.substring(0,
    s.endNodeIndex),E);return x=u.parentNode,x.insertBefore(l,u),x.insertBefore(F,u),x.removeChild(u),x=v.parentNode,x.insertBefore(s,v),x.insertBefore(D,v),x.removeChild(v),s}}function j(h){var n=m.getElementsByTagName("*"),s=[];h="number"==typeof h?""+h:null;for(var l=0;l<n.length;l++){var D=n[l],x=D.getAttribute("data-mce-index");null!==x&&x.length&&(x===h||null===h)&&s.push(D)}return s}function e(h){for(var n=d.length;n--;)if(d[n]===h)return n;return-1}function g(h){for(var n=0,s=d.length;s>n&&h(d[n],
    n)!==false;n++);return this}function i(h){var n=j(h?e(h):null);for(h=n.length;h--;){var s=n[h];s.parentNode.insertBefore(s.firstChild,s);s.parentNode.removeChild(s)}return this}function k(h){h=j(e(h));var n=t.dom.createRng();return n.setStartBefore(h[0]),n.setEndAfter(h[h.length-1]),n}var A,w,C,q,r,d=[],p=t.dom;return C=t.schema.getBlockElements(),q=t.schema.getWhiteSpaceElements(),r=t.schema.getShortEndedElements(),w=c(m),{text:w,matches:d,each:g,filter:function(h){var n=[];return g(function(s,l){h(s,
    l)&&n.push(s)}),d=n,this},reset:function(){return d.splice(0,d.length),i(),this},matchFromElement:function(h){return d[h.getAttribute("data-mce-index")]},elementFromMatch:function(h){return j(e(h))[0]},find:function(h,n){if(w&&h.global)for(;A=h.exec(w);)d.push(o(A,n));return this},add:function(h,n,s){return d.push({start:h,end:h+n,text:w.substr(h,n),data:s}),this},wrap:function(h){return d.length&&b(m,d,f(h)),this},unwrap:i,replace:function(h,n){var s=k(h);return s.deleteContents(),n.length>0&&s.insertNode(t.dom.doc.createTextNode(n)),
    s},rangeFromMatch:k,indexOf:e}}});y("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(m,t,o,c,b,f,j,e){t.add("spellchecker",function(g,i){function k(){return J.textMatcher||(J.textMatcher=new m(g.getBody(),g)),J.textMatcher}function A(I){for(var M in I)return false;return true}function w(I,M){var N=[];o.each(v[I],function(R){N.push({text:R,
    onclick:function(){g.insertContent(g.dom.encode(R));g.dom.remove(M);p()}})});N.push({text:"-"});G&&N.push({text:"Add to Dictionary",onclick:function(){h(I,M)}});N.push.apply(N,[{text:"Ignore",onclick:function(){n(I,M)}},{text:"Ignore all",onclick:function(){n(I,M,true)}}]);F=new c({items:N,context:"contextmenu",onautohide:function(R){-1!=R.target.className.indexOf("spellchecker")&&R.preventDefault()},onhide:function(){F.remove();F=null}});F.renderTo(document.body);var O=b.DOM.getPos(g.getContentAreaContainer()),
    P=g.dom.getPos(M[0]),Q=g.dom.getRoot();"BODY"==Q.nodeName?(P.x-=Q.ownerDocument.documentElement.scrollLeft||Q.scrollLeft,P.y-=Q.ownerDocument.documentElement.scrollTop||Q.scrollTop):(P.x-=Q.scrollLeft,P.y-=Q.scrollTop);O.x+=P.x;O.y+=P.y;F.moveTo(O.x,O.y+M[0].offsetHeight)}function C(){return g.getParam("spellchecker_wordchar_pattern")||RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\u00a7\u00a9\u00ab\u00ae\u00b1\u00b6\u00b7\u00b8\u00bb\u00bc\u00bd\u00be\u00bf\u00d7\u00f7\u00a4\u201d\u201c\u201e\u00a0\u2002\u2003\u2009]+',
        "g")}function q(I,M,N,O){var P={method:I},Q="";"spellcheck"==I&&(P.text=M,P.lang=K.spellchecker_language);"addToDictionary"==I&&(P.word=M);o.each(P,function(R,S){Q&&(Q+="&");Q+=S+"="+encodeURIComponent(R)});f.send({url:(new j(i)).toAbsolute(K.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:Q,success:function(R){(R=e.parse(R))?R.error?O(R.error):N(R):O("Sever response wasn't proper JSON.")},error:function(R,S){O("Spellchecker request error: "+S.status)}})}function r(I,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      M,N,O){(K.spellchecker_callback||q).call(J,I,M,N,O)}function d(){function I(M){g.windowManager.alert(M);g.setProgressState(false);s()}return E?void s():(s(),g.setProgressState(true),r("spellcheck",k().text,x,I),void g.focus())}function p(){g.dom.select("span.mce-spellchecker-word").length||s()}function h(I,M){g.setProgressState(true);r("addToDictionary",I,function(){g.setProgressState(false);g.dom.remove(M,true);p()},function(N){g.windowManager.alert(N);g.setProgressState(false)})}function n(I,M,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       N){g.selection.collapse();N?o.each(g.dom.select("span.mce-spellchecker-word"),function(O){O.getAttribute("data-mce-word")==I&&g.dom.remove(O,true)}):g.dom.remove(M,true);p()}function s(){k().reset();J.textMatcher=null;E&&(E=false,g.fire("SpellcheckEnd"))}function l(I){I=I.getAttribute("data-mce-index");return"number"==typeof I?""+I:I}function D(I){var M=K.spellchecker_language;I.control.items().each(function(N){N.active(N.settings.data===M)})}function x(I){var M;return I.words?(G=!!I.dictionary,M=
    I.words):M=I,g.setProgressState(false),A(M)?(g.windowManager.alert("No misspellings found"),void(E=false)):(v=M,k().find(C()).filter(function(N){return!!M[N.text]}).wrap(function(N){return g.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":N.text})}),E=true,void g.fire("SpellcheckStart"))}var u,v,E,F,G,J=this,K=g.settings;u=function(I,M){var N=[];return o.each(M,function(O){N.push({selectable:true,text:O.name,data:O.value})}),N}("Language",o.map((K.spellchecker_languages||
"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv").split(","),function(I){return I=I.split("="),{name:I[0],value:I[1]}}));g.on("click",function(I){var M=I.target;if("mce-spellchecker-word"==M.className){I.preventDefault();var N=l(M),O;I=[];if(O=o.toArray(g.getBody().getElementsByTagName("span")),O.length)for(var P=0;P<O.length;P++){var Q=l(O[P]);null!==Q&&Q.length&&Q===N.toString()&&I.push(O[P])}if(I.length>0){O=g.dom.createRng();
    O.setStartBefore(I[0]);O.setEndAfter(I[I.length-1]);g.selection.setRng(O);w(M.getAttribute("data-mce-word"),I)}}});g.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:d,selectable:true,onPostRender:function(){var I=this;I.active(E);g.on("SpellcheckStart SpellcheckEnd",function(){I.active(E)})}});var L={tooltip:"Spellcheck",onclick:d,onPostRender:function(){var I=this;g.on("SpellcheckStart SpellcheckEnd",function(){I.active(E)})}};u.length>1&&(L.type="splitbutton",L.menu=u,L.onshow=
    D,L.onselect=function(I){K.spellchecker_language=I.control.settings.data});g.addButton("spellchecker",L);g.addCommand("mceSpellCheck",d);g.on("remove",function(){F&&(F.remove(),F=null)});g.on("change",p);this.getTextMatcher=k;this.getWordCharPattern=C;this.markErrors=x;this.getLanguage=function(){return K.spellchecker_language};K.spellchecker_language=K.spellchecker_language||K.language||"en"})});(function(m){for(var t=0;t<m.length;t++){for(var o=a,c=m[t],b=c.split(/[.\/]/),f=0;f<b.length-1;++f){o[b[f]]===
z&&(o[b[f]]={});o=o[b[f]]}o[b[b.length-1]]=B[c]}})(["tinymce/spellcheckerplugin/DomTextMatcher"])})(this);
tinymce.PluginManager.add("template",function(a){function z(c){return function(){var b=a.settings.templates;"string"==typeof b?tinymce.util.XHR.send({url:b,success:function(f){c(tinymce.util.JSON.parse(f))}}):c(b)}}function H(c){function b(g){function i(A){if(-1==A.indexOf("<html>")){var w="";tinymce.each(a.contentCSS,function(q){w+='<link type="text/css" rel="stylesheet" href="'+a.documentBaseURI.toAbsolute(q)+'">'});A="<!DOCTYPE html><html><head>"+w+"</head><body>"+A+"</body></html>"}A=m(A,"template_preview_replace_values");
    var C=f.find("iframe")[0].getEl().contentWindow.document;C.open();C.write(A);C.close()}var k=g.control.value();k.url?tinymce.util.XHR.send({url:k.url,success:function(A){j=A;i(j)}}):(j=k.content,i(j));f.find("#description")[0].text(g.control.value().description)}var f,j,e=[];return c&&0!==c.length?(tinymce.each(c,function(g){e.push({selected:!e.length,text:g.title,value:{url:g.url,content:g.content,description:g.description}})}),f=a.windowManager.open({title:"Insert template",layout:"flex",direction:"column",
    align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:e,onselect:b}}]},{type:"label",name:"description",label:"Description",text:"\u00a0"},{type:"iframe",flex:1,border:1}],onsubmit:function(){t(false,j)},width:a.getParam("template_popup_width",600),height:a.getParam("template_popup_height",500)}),void f.find("listbox")[0].fire("select")):void a.windowManager.alert("No templates defined")}
    function y(c,b){function f(k,A){if(k=""+k,k.length<A)for(var w=0;w<A-k.length;w++)k="0"+k;return k}var j="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),g="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),i="January February March April May June July August September October November December".split(" ");return b=b||new Date,c=c.replace("%D","%m/%d/%Y"),c=c.replace("%r","%I:%M:%S %p"),c=c.replace("%Y",""+b.getFullYear()),
        c=c.replace("%y",""+b.getYear()),c=c.replace("%m",f(b.getMonth()+1,2)),c=c.replace("%d",f(b.getDate(),2)),c=c.replace("%H",""+f(b.getHours(),2)),c=c.replace("%M",""+f(b.getMinutes(),2)),c=c.replace("%S",""+f(b.getSeconds(),2)),c=c.replace("%I",""+((b.getHours()+11)%12+1)),c=c.replace("%p",""+(b.getHours()<12?"AM":"PM")),c=c.replace("%B",""+a.translate(i[b.getMonth()])),c=c.replace("%b",""+a.translate(g[b.getMonth()])),c=c.replace("%A",""+a.translate(e[b.getDay()])),c=c.replace("%a",""+a.translate(j[b.getDay()])),
        c=c.replace("%%","%")}function B(c){var b=a.dom,f=a.getParam("template_replace_values");o(b.select("*",c),function(j){o(f,function(e,g){b.hasClass(j,g)&&"function"==typeof f[g]&&f[g](j)})})}function m(c,b){return o(a.getParam(b),function(f,j){"function"!=typeof f&&(c=c.replace(RegExp("\\{\\$"+j+"\\}","g"),f))}),c}function t(c,b){function f(k,A){return RegExp("\\b"+A+"\\b","g").test(k.className)}var j,e,g=a.dom,i=a.selection.getContent();b=m(b,"template_replace_values");j=g.create("div",null,b);(e=
        g.select(".mceTmpl",j))&&e.length>0&&(j=g.create("div",null),j.appendChild(e[0].cloneNode(true)));o(g.select("*",j),function(k){f(k,a.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(k.innerHTML=y(a.getParam("template_cdate_format",a.getLang("template.cdate_format"))));f(k,a.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(k.innerHTML=y(a.getParam("template_mdate_format",a.getLang("template.mdate_format"))));f(k,a.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,
        "|"))&&(k.innerHTML=i)});B(j);a.execCommand("mceInsertContent",false,j.innerHTML);a.addVisual()}var o=tinymce.each;a.addCommand("mceInsertTemplate",t);a.addButton("template",{title:"Insert template",onclick:z(H)});a.addMenuItem("template",{text:"Insert template",onclick:z(H),context:"insert"});a.on("PreProcess",function(c){var b=a.dom;o(b.select("div",c.node),function(f){b.hasClass(f,"mceTmpl")&&(o(b.select("*",f),function(j){b.hasClass(j,a.getParam("template_mdate_classes","mdate").replace(/\s+/g,
        "|"))&&(j.innerHTML=y(a.getParam("template_mdate_format",a.getLang("template.mdate_format"))))}),B(f))})})});
tinymce.PluginManager.add("textcolor",function(a){function z(f){var j;return a.dom.getParents(a.selection.getStart(),function(e){var g;(g=e.style["forecolor"==f?"color":"background-color"])&&(j=g)}),j}function H(){var f,j,e=[];j=a.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080",
    "Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF",
    "Plum"];for(f=0;f<j.length;f+=2)e.push({text:j[f+1],color:"#"+j[f]});return e}function y(){function f(r,d){var p="transparent"==r;return'<td class="mce-grid-cell'+(p?" mce-colorbtn-trans":"")+'"><div id="'+C+"-"+q++ +'" data-mce-color="'+(r?r:"")+'" role="option" tabIndex="-1" style="'+(r?"background-color: "+r:"")+'" title="'+tinymce.translate(d)+'">'+(p?"×":"")+"</div></td>"}var j,e,g,i,k,A,w,C=this._id,q=0;j=H();j.push({text:tinymce.translate("No color"),color:"transparent"});g='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';
    i=j.length-1;for(A=0;b>A;A++){g+="<tr>";for(k=0;c>k;k++){w=A*c+k;w>i?g+="<td></td>":(e=j[w],g+=f(e.color,e.text))}g+="</tr>"}if(a.settings.color_picker_callback){g+='<tr><td colspan="'+c+'" class="mce-custom-color-btn"><div id="'+C+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+C+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>";g+="<tr>";for(k=0;c>
    k;k++)g+=f("","Custom color");g+="</tr>"}return g+="</tbody></table>"}function B(f,j){a.undoManager.transact(function(){a.focus();a.formatter.apply(f,{value:j});a.nodeChanged()})}function m(f){a.undoManager.transact(function(){a.focus();a.formatter.remove(f,{value:null},null,true);a.nodeChanged()})}function t(f){function j(k){i.hidePanel();i.color(k);B(i.settings.format,k)}function e(k,A){k.style.background=A;k.setAttribute("data-mce-color",A)}var g,i=this.parent();tinymce.DOM.getParent(f.target,
    ".mce-custom-color-btn")&&(i.hidePanel(),a.settings.color_picker_callback.call(a,function(k){var A,w,C;A=i.panel.getEl().getElementsByTagName("table")[0];A=tinymce.map(A.rows[A.rows.length-1].childNodes,function(q){return q.firstChild});for(C=0;C<A.length&&(w=A[C],w.getAttribute("data-mce-color"));C++);if(C==c)for(C=0;c-1>C;C++)e(A[C],A[C+1].getAttribute("data-mce-color"));e(w,k);j(k)},z(i.settings.format)));if(g=f.target.getAttribute("data-mce-color")){this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",
    false);f.target.setAttribute("aria-selected",true);this.lastId=f.target.id;if("transparent"==g){i.hidePanel();i.resetColor();m(i.settings.format)}else j(g)}else null!==g&&i.hidePanel()}function o(){this._color?B(this.settings.format,this._color):m(this.settings.format)}var c,b;b=a.settings.textcolor_rows||5;c=a.settings.textcolor_cols||8;a.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:true,html:y,onclick:t},onclick:o});a.addButton("backcolor",
    {type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:true,html:y,onclick:t},onclick:o})});
tinymce.PluginManager.add("textpattern",function(a){function z(){return t&&(m.sort(function(o,c){return o.start.length>c.start.length?-1:o.start.length<c.start.length?1:0}),t=false),m}function H(o){for(var c=z(),b=0;b<c.length;b++)if(0===o.indexOf(c[b].start)&&(!c[b].end||o.lastIndexOf(c[b].end)==o.length-c[b].end.length))return c[b]}function y(o){var c,b,f,j,e,g,i,k;c=a.selection;b=a.dom;var A;if(A=c.isCollapsed()){f=c.getRng(true);j=f.startContainer;f=f.startOffset;c=j.data;k=o?1:0;if(o=3==j.nodeType){var w;
    a:{o=f;A=k;var C,q,r;C=z();for(r=0;r<C.length;r++)if(q=C[r],q.end&&c.substr(o-q.end.length-A,q.end.length)==q.end){w=q;break a}}o=(i=w,i&&(e=Math.max(0,f-k),e=c.lastIndexOf(i.start,e-i.end.length-1),-1!==e&&(g=b.createRng(),g.setStart(j,e),g.setEnd(j,f-k),i=H(g.toString()),i&&i.end&&!(j.data.length<=i.start.length+i.end.length))))}A=o}if(A)if((b=a.formatter.get(i.format))&&b[0].inline){j=j.splitText(e);j.splitText(f-e-k);j.deleteData(0,i.start.length);j.deleteData(j.data.length-i.end.length,i.end.length);
    j=(a.formatter.apply(i.format,{},j),j)}else j=void 0;else j=void 0;return j}function B(){var o,c,b,f,j,e,g,i,k;if(o=a.selection,c=a.dom,o.isCollapsed()&&(e=c.getParent(o.getStart(),"p"))){for(e=new tinymce.dom.TreeWalker(e,e);c=e.next();)if(3==c.nodeType){f=c;break}if(f)if(!(g=H(f.data),!g))if(!(i=o.getRng(true),b=i.startContainer,k=i.startOffset,f==b&&(k=Math.max(0,k-g.start.length)),tinymce.trim(f.data).length==g.start.length)){g.format&&(j=a.formatter.get(g.format),j&&j[0].block&&(f.deleteData(0,
    g.start.length),a.formatter.apply(g.format,{},f),i.setStart(b,k),i.collapse(true),o.setRng(i)));g.cmd&&a.undoManager.transact(function(){f.deleteData(0,g.start.length);a.execCommand(g.cmd)})}}}var m,t=true;m=a.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},
    {start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}];a.on("keydown",function(o){if(13==o.keyCode)if(!tinymce.util.VK.modifierPressed(o)){var c;(o=y())&&(c=a.dom.createRng(),c.setStart(o,o.data.length),c.setEnd(o,o.data.length),a.selection.setRng(c));B()}},true);a.on("keyup",function(o){if(32==o.keyCode)if(!tinymce.util.VK.modifierPressed(o)){var c,b,f,j;(o=y(true))&&(j=a.dom,c=o.data.slice(-1),/[\u00a0 ]/.test(c)&&(o.deleteData(o.data.length-1,1),b=j.doc.createTextNode(c),
    o.nextSibling?j.insertAfter(b,o.nextSibling):o.parentNode.appendChild(b),f=j.createRng(),f.setStart(b,1),f.setEnd(b,1),a.selection.setRng(f)))}});this.getPatterns=z;this.setPatterns=function(o){m=o;t=true}});
tinymce.PluginManager.add("visualblocks",function(a,z){function H(){var m=this;m.active(B);a.on("VisualBlocks",function(){m.active(a.dom.hasClass(a.getBody(),"mce-visualblocks"))})}var y,B;window.NodeList&&(a.addCommand("mceVisualBlocks",function(){var m,t=a.dom;y||(y=t.uniqueId(),m=t.create("link",{id:y,rel:"stylesheet",href:z+"/css/visualblocks.css"}),a.getDoc().getElementsByTagName("head")[0].appendChild(m));a.on("PreviewFormats AfterPreviewFormats",function(o){B&&t.toggleClass(a.getBody(),"mce-visualblocks",
    "afterpreviewformats"==o.type)});t.toggleClass(a.getBody(),"mce-visualblocks");B=a.dom.hasClass(a.getBody(),"mce-visualblocks");a.fire("VisualBlocks")}),a.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:H}),a.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:H,selectable:true,context:"view",prependToContext:true}),a.on("init",function(){a.settings.visualblocks_default_state&&a.execCommand("mceVisualBlocks",false,null,{skip_focus:true})}),
    a.on("remove",function(){a.dom.removeClass(a.getBody(),"mce-visualblocks")}))});
(function(a,z){function H(m,t){for(var o,c=[],b=0;b<m.length;++b){var f;if(!(f=B[m[b]]))a:{f=a;for(var j=m[b].split(/[.\/]/),e=0;e<j.length;++e){if(!f[j[e]]){f=void 0;break a}f=f[j[e]]}}if(o=f,!o)throw"module definition dependecy not found: "+m[b];c.push(o)}t.apply(null,c)}function y(m,t,o){if("string"!=typeof m)throw"invalid module definition, module id must be defined and be a string";if(t===z)throw"invalid module definition, dependencies must be specified";if(o===z)throw"invalid module definition, definition function must be specified";
    H(t,function(){B[m]=o.apply(null,arguments)})}var B={};y("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(m,t){function o(b,f){return parseInt(b.getAttribute(f)||1,10)}var c=m.each;return function(b,f){function j(){var v=0;h=[];n=0;c(["thead","tbody","tfoot"],function(E){var F=u.select("> "+E+" tr",f);c(F,function(G,J){J+=v;c(u.select("> td, > th",G),function(K,L){var I,M,N,O;if(h[J])for(;h[J][L];)L++;N=o(K,"rowspan");O=o(K,"colspan");for(M=J;J+N>M;M++){h[M]||(h[M]=[]);
    for(I=L;L+O>I;I++)h[M][I]={part:E,real:M==J&&I==L,elm:K,rowspan:N,colspan:O}}n=Math.max(n,L+1)})});v+=F.length})}function e(v,E){return v=v.cloneNode(E),v.removeAttribute("id"),v}function g(v,E){var F;return F=h[E],F?F[v]:void 0}function i(v,E,F){v&&(F=parseInt(F,10),1===F?v.removeAttribute(E,1):v.setAttribute(E,F,1))}function k(v){return v&&(u.hasClass(v.elm,"mce-item-selected")||v==D)}function A(){var v=[];return c(f.rows,function(E){c(E.cells,function(F){return u.hasClass(F,"mce-item-selected")||
D&&F==D.elm?(v.push(E),false):void 0})}),v}function w(v){var E,F={};return b.settings.table_clone_elements!==false&&(F=m.makeMap((b.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),m.walk(v,function(G){var J;return 3==G.nodeType?(c(u.getParents(G.parentNode,null,v).reverse(),function(K){F[K.nodeName]&&(K=e(K,false),E?J&&J.appendChild(K):E=J=K,J=K)}),J&&(J.innerHTML=t.ie?" ":'<br data-mce-bogus="1" />'),false):void 0},"childNodes"),v=e(v,
    false),i(v,"rowSpan",1),i(v,"colSpan",1),E?v.appendChild(E):(!t.ie||t.ie>10)&&(v.innerHTML='<br data-mce-bogus="1" />'),v}function C(){var v,E=u.createRng();return c(u.select("tr",f),function(F){0===F.cells.length&&u.remove(F)}),0===u.select("tr",f).length?(E.setStartBefore(f),E.setEndBefore(f),x.setRng(E),void u.remove(f)):(c(u.select("thead,tbody,tfoot",f),function(F){0===F.rows.length&&u.remove(F)}),j(),void(s&&(v=h[Math.min(h.length-1,s.y)],v&&(x.select(v[Math.min(v.length-1,s.x)].elm,true),x.collapse(true)))))}
    function q(v,E,F,G){var J,K,L,I,M;J=h[E][v].elm.parentNode;for(L=1;F>=L;L++)if(J=u.getNext(J,"tr")){for(K=v;K>=0;K--)if(M=h[E+L][K].elm,M.parentNode==J){for(I=1;G>=I;I++)u.insertAfter(w(M),M);break}if(-1==K)for(I=1;G>=I;I++)J.insertBefore(w(J.cells[0]),J.cells[0])}}function r(){c(h,function(v,E){c(v,function(F,G){var J,K,L;if(k(F)&&(F=F.elm,J=o(F,"colspan"),K=o(F,"rowspan"),J>1||K>1)){i(F,"rowSpan",1);i(F,"colSpan",1);for(L=0;J-1>L;L++)u.insertAfter(w(F),F);q(G,E,K-1,J)}})})}function d(v){var E;return c(h,
        function(F,G){return c(F,function(J,K){return J.elm==v?(E={x:K,y:G},false):void 0}),!E}),E}function p(){var v,E;return v=E=0,c(h,function(F,G){c(F,function(J,K){var L,I;k(J)&&(J=h[G][K],K>v&&(v=K),G>E&&(E=G),J.real&&(L=J.colspan-1,I=J.rowspan-1,L&&K+L>v&&(v=K+L),I&&G+I>E&&(E=G+I)))})}),{x:v,y:E}}var h,n,s,l,D,x=b.selection,u=x.dom;f=f||u.getParent(x.getStart(),"table");j();(D=u.getParent(x.getStart(),"th,td"))&&(s=d(D),l=p(),D=g(s.x,s.y));m.extend(this,{deleteTable:function(){var v=u.createRng();
        v.setStartAfter(f);v.setEndAfter(f);x.setRng(v);u.remove(f)},split:r,merge:function(v,E,F){var G,J,K,L,I,M,N,O,P;if(v?(G=d(v),J=G.x,K=G.y,L=J+(E-1),I=K+(F-1)):(s=l=null,c(h,function(Q,R){c(Q,function(S,T){k(S)&&(s||(s={x:T,y:R}),l={x:T,y:R})})}),s&&(J=s.x,K=s.y,L=l.x,I=l.y)),M=g(J,K),N=g(L,I),M&&N&&M.part==N.part){r();j();M=g(J,K).elm;i(M,"colSpan",L-J+1);i(M,"rowSpan",I-K+1);for(F=K;I>=F;F++)for(E=J;L>=E;E++)h[F]&&h[F][E]&&(v=h[F][E].elm,v!=M&&(O=m.grep(v.childNodes),c(O,function(Q){M.appendChild(Q)}),
    O.length&&(O=m.grep(M.childNodes),P=0,c(O,function(Q){"BR"==Q.nodeName&&u.getAttrib(Q,"data-mce-bogus")&&P++<O.length-1&&M.removeChild(Q)})),u.remove(v)));C()}},insertRow:function(v){var E,F,G,J,K,L,I,M;if(c(h,function(N,O){return c(N,function(P){return k(P)&&(P=P.elm,K=P.parentNode,L=e(K,false),E=O,v)?false:void 0}),v?!E:void 0}),E!==z){for(J=0;J<h[0].length;J++)if(h[E][J]&&(F=h[E][J].elm,F!=G)){if(v){if(E>0&&h[E-1][J]&&(I=h[E-1][J].elm,M=o(I,"rowSpan"),M>1)){i(I,"rowSpan",M+1);continue}}else if(M=
            o(F,"rowspan"),M>1){i(F,"rowSpan",M+1);continue}G=w(F);i(G,"colSpan",F.colSpan);L.appendChild(G);G=F}L.hasChildNodes()&&(v?K.parentNode.insertBefore(L,K):u.insertAfter(L,K))}},insertCol:function(v){var E,F;c(h,function(G){return c(G,function(J,K){return k(J)&&(E=K,v)?false:void 0}),v?!E:void 0});c(h,function(G,J){var K,L,I;G[E]&&(K=G[E].elm,K!=F&&(I=o(K,"colspan"),L=o(K,"rowspan"),1==I?v?(K.parentNode.insertBefore(w(K),K),q(E,J,L-1,I)):(u.insertAfter(w(K),K),q(E,J,L-1,I)):i(K,"colSpan",K.colSpan+
    1),F=K))})},deleteCols:function(){var v=[];c(h,function(E){c(E,function(F,G){k(F)&&-1===m.inArray(v,G)&&(c(h,function(J){var K=J[G].elm;J=o(K,"colSpan");J>1?i(K,"colSpan",J-1):u.remove(K)}),v.push(G))})});C()},deleteRows:function(){function v(F){var G,J;c(F.cells,function(K){var L=o(K,"rowSpan");L>1&&(i(K,"rowSpan",L-1),G=d(K),q(G.x,G.y,1,1))});G=d(F.cells[0]);c(h[G.y],function(K){var L;K=K.elm;K!=J&&(L=o(K,"rowSpan"),1>=L?u.remove(K):i(K,"rowSpan",L-1),J=K)})}var E;E=A();c(E.reverse(),function(F){v(F)});
        C()},cutRows:function(){var v=A();return u.remove(v),C(),v},copyRows:function(){var v=A();return c(v,function(E,F){v[F]=e(E,true)}),v},pasteRows:function(v,E){var F=A(),G=F[E?0:F.length-1],J=G.cells.length;v&&(c(h,function(K){var L;return J=0,c(K,function(I){I.real&&(J+=I.colspan);I.elm.parentNode==G&&(L=1)}),L?false:void 0}),E||v.reverse(),c(v,function(K){var L,I,M=K.cells.length;for(L=0;M>L;L++){I=K.cells[L];i(I,"colSpan",1);i(I,"rowSpan",1)}for(L=M;J>L;L++)K.appendChild(w(K.cells[M-1]));for(L=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               J;M>L;L++)u.remove(K.cells[L]);E?G.parentNode.insertBefore(K,G):u.insertAfter(K,G)}),u.removeClass(u.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))},getPos:d,setStartCell:function(v){s=d(v)},setEndCell:function(v){var E,F,G,J,K,L,I,M,N,O;if(l=d(v),s&&l){E=Math.min(s.x,l.x);F=Math.min(s.y,l.y);G=Math.max(s.x,l.x);J=Math.max(s.y,l.y);K=G;L=J;for(O=F;L>=O;O++){v=h[O][E];v.real||E-(v.colspan-1)<E&&(E-=v.colspan-1)}for(N=E;K>=N;N++){v=h[F][N];v.real||F-(v.rowspan-1)<F&&(F-=v.rowspan-
    1)}for(O=F;J>=O;O++)for(N=E;G>=N;N++){v=h[O][N];v.real&&(I=v.colspan-1,M=v.rowspan-1,I&&N+I>K&&(K=N+I),M&&O+M>L&&(L=O+M))}u.removeClass(u.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected");for(O=F;L>=O;O++)for(N=E;K>=N;N++)h[O][N]&&u.addClass(h[O][N].elm,"mce-item-selected")}},moveRelIdx:function(v,E){var F,G;F=d(v);F=F.y*n+F.x;do{if(F+=E,G=g(F%n,Math.floor(F/n)),!G)break;if(G.elm!=v)return x.select(G.elm,true),u.isEmpty(G.elm)&&x.collapse(true),true}while(G.elm==v);return false},
        refresh:j})}});y("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(m,t,o){var c=o.each;return function(b){function f(){function i(k){function A(h,n){var s=h?"previousSibling":"nextSibling",l=b.dom.getParent(n,"tr"),D=l[s];if(D)return r(b,n,D,h),k.preventDefault(),true;D=b.dom.getParent(l,"table");var x=l.parentNode,u=x.nodeName.toLowerCase();if("tbody"===u||u===(h?"tfoot":"thead")){u=b.dom.select(">tbody",D);var v=u.indexOf(x);if(h&&0===v||!h&&v===u.length-
    1){x=b.dom.select(">"+(h?"thead":"tfoot"),D);x=0!==x.length?x[0]:null}else if(-1===v){x="thead"===x.tagName.toLowerCase()?0:u.length-1;x=u[x]}else x=u[v+(h?-1:1)];if(null!==x){l=w(x,h);return l&&r(b,n,l,h),k.preventDefault(),true}}if(s=D[s]){b.selection.setCursorLocation(s,0);l=true}else if(s=b.dom.getParent(D,"td,th"))l=A(h,s,k);else{l=w(l,!h);b.selection.setCursorLocation(l,0);l=(k.preventDefault(),false)}return l}function w(h,n){var s=h&&h[n?"lastChild":"firstChild"];return s&&"BR"===s.nodeName?
    b.dom.getParent(s,"td,th"):s}function C(h){var n=h.selection.getNode();return null!==h.dom.getParent(n,"tr")}function q(h,n){var s=0,l=0;return c(h.children,function(D,x){return s+=parseInt(D.getAttribute("colspan")||1,10),l=x,s>n?false:void 0}),l}function r(h,n,s,l){h=0;for(n=b.dom.getParent(n,"td,th");n.previousSibling;){n=n.previousSibling;h+=parseInt(n.getAttribute("colspan")||1,10)}n=q(s,h);s=s.childNodes[n];l=w(s,l);b.selection.setCursorLocation(l||s,0)}var d=k.keyCode;if((d==m.UP||d==m.DOWN)&&
    C(b)){var p=b.selection.getNode();setTimeout(function(){var h=b.selection.getNode();h=b.dom.getParent(h,"td,th");var n=b.dom.getParent(p,"td,th");h&&h!==n&&b.dom.getParent(h,"TABLE")===b.dom.getParent(n,"TABLE")&&A(!k.shiftKey&&d===m.UP,p,k)},0)}}b.on("KeyDown",function(k){i(k)})}function j(){b.on("KeyDown",function(i){var k,A,w=b.dom;if(37==i.keyCode||38==i.keyCode){k=b.selection.getRng();if(A=w.getParent(k.startContainer,"table"))if(b.getBody().firstChild==A){var C=k,q,r=A.ownerDocument,d=r.createRange();
    (d.setStartBefore(A),d.setEnd(C.endContainer,C.endOffset),q=r.createElement("body"),q.appendChild(d.cloneContents()),0===q.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length)&&(k=w.createRng(),k.setStartBefore(A),k.setEndBefore(A),b.selection.setRng(k),i.preventDefault())}}})}function e(){b.on("KeyDown SetContent VisualAid",function(){var i;for(i=b.getBody().lastChild;i;i=i.previousSibling)if(3==i.nodeType){if(i.nodeValue.length>0)break}else if(1==
    i.nodeType&&("BR"==i.tagName||!i.getAttribute("data-mce-bogus")))break;i&&"TABLE"==i.nodeName&&(b.settings.forced_root_block?b.dom.add(b.getBody(),b.settings.forced_root_block,b.settings.forced_root_block_attrs,t.ie&&t.ie<11?" ":'<br data-mce-bogus="1" ></11>'):b.dom.add(b.getBody(),"br",{"data-mce-bogus":"1"}))});b.on("PreProcess",function(i){(i=i.node.lastChild)&&("BR"==i.nodeName||1==i.childNodes.length&&("BR"==i.firstChild.nodeName||"\u00a0"==i.firstChild.nodeValue))&&i.previousSibling&&"TABLE"==
i.previousSibling.nodeName&&b.dom.remove(i)})}function g(){function i(){var k=b.selection.getRng(),A=b.selection.getNode(),w=b.dom.getParent(k.startContainer,"TD,TH"),C=w,q,r,d,p=b.dom.getParent(k.startContainer,"TABLE");if(p&&(q=p.parentNode),r=k.startContainer.nodeType==3&&0===k.startOffset&&0===k.endOffset&&C&&("TR"==A.nodeName||A==q),d=("TD"==A.nodeName||"TH"==A.nodeName)&&!C,r||d){w||(w=A);for(A=w.lastChild;A.lastChild;)A=A.lastChild;3==A.nodeType&&(k.setEnd(A,A.data.length),b.selection.setRng(k))}}
    b.on("KeyDown",function(){i()});b.on("MouseDown",function(k){2!=k.button&&i()})}(function(){b.on("keydown",function(i){if((i.keyCode==m.DELETE||i.keyCode==m.BACKSPACE)&&!i.isDefaultPrevented()){var k=b.dom.getParent(b.selection.getStart(),"table");if(k){k=b.dom.select("td,th",k);for(var A=k.length;A--;)if(!b.dom.hasClass(k[A],"mce-item-selected"))return;i.preventDefault();b.execCommand("mceTableDelete")}}})})();t.webkit&&(f(),g());t.gecko&&(j(),e());t.ie>10&&(j(),e())}});y("tinymce/tableplugin/CellSelection",
    ["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(m,t,o){return function(c){function b(w){c.getBody().style.webkitUserSelect="";(w||A)&&(c.dom.removeClass(c.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),A=false)}function f(w){var C,q=w.target;if(!i&&e&&(j||q!=e)&&("TD"==q.nodeName||"TH"==q.nodeName)){C=k.getParent(q,"table");C==g&&(j||(j=new m(c,C),j.setStartCell(e),c.getBody().style.webkitUserSelect="none"),j.setEndCell(q),A=true);
        C=c.selection.getSel();try{C.removeAllRanges?C.removeAllRanges():C.empty()}catch(r){}w.preventDefault()}}var j,e,g,i,k=c.dom,A=true;return c.on("MouseDown",function(w){2==w.button||i||(b(),e=k.getParent(w.target,"td,th"),g=k.getParent(e,"table"))}),c.on("mouseover",f),c.on("remove",function(){k.unbind(c.getDoc(),"mouseover",f)}),c.on("MouseUp",function(){function w(h,n){var s=new t(h,h);do{if(3==h.nodeType&&0!==o.trim(h.nodeValue).length)return void(n?C.setStart(h,0):C.setEnd(h,h.nodeValue.length));
        if("BR"==h.nodeName)return void(n?C.setStartBefore(h):C.setEndBefore(h))}while(h=n?s.next():s.prev())}var C,q,r,d,p=c.selection;if(e){if(j&&(c.getBody().style.webkitUserSelect=""),q=k.select("td.mce-item-selected,th.mce-item-selected"),q.length>0){C=k.createRng();r=q[0];C.setStartBefore(r);C.setEndAfter(r);w(r,1);q=new t(r,k.getParent(q[0],"table"));do if("TD"==r.nodeName||"TH"==r.nodeName){if(!k.hasClass(r,"mce-item-selected"))break;d=r}while(r=q.next());w(d);p.setRng(C)}c.nodeChanged();e=j=g=null}}),
        c.on("KeyUp Drop SetContent",function(w){b("setcontent"==w.type);e=j=g=null;i=false}),c.on("ObjectResizeStart ObjectResized",function(w){i="objectresized"!=w.type}),{clear:b}}});y("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(m,t){var o=m.each;return function(c){function b(){var r=c.settings.color_picker_callback;return r?function(){var d=this;r.call(c,function(p){d.value(p).fire("change")},d.value())}:void 0}function f(r){return{title:"Advanced",type:"form",defaults:{onchange:function(){A(r,
    this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:b()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:b()}]}]}}function j(r){return r?r.replace(/px$/,""):""}function e(r){return/^[0-9]+$/.test(r)&&(r+="px"),r}function g(r){o("left center right".split(" "),
    function(d){c.formatter.remove("align"+d,{},r)})}function i(r){o("top middle bottom".split(" "),function(d){c.formatter.remove("valign"+d,{},r)})}function k(r,d,p){function h(n,s){return s=s||[],m.each(n,function(l){var D={text:l.text||l.title};l.menu?D.menu=h(l.menu):(D.value=l.value,d&&d(D));s.push(D)}),s}return h(r,p||[])}function A(r,d,p){var h=d.toJSON(),n=r.parseStyle(h.style);p?(d.find("#borderColor").value(n["border-color"]||"")[0].fire("change"),d.find("#backgroundColor").value(n["background-color"]||
"")[0].fire("change")):(n["border-color"]=h.borderColor,n["background-color"]=h.backgroundColor);d.find("#style").value(r.serializeStyle(r.parseStyle(r.serializeStyle(n))))}function w(r,d,p){p=r.parseStyle(r.getAttrib(p,"style"));p["border-color"]&&(d.borderColor=p["border-color"]);p["background-color"]&&(d.backgroundColor=p["background-color"]);d.style=r.serializeStyle(p)}function C(r,d,p){var h=r.parseStyle(r.getAttrib(d,"style"));o(p,function(n){h[n.name]=n.value});r.setAttrib(d,"style",r.serializeStyle(r.parseStyle(r.serializeStyle(h))))}
    var q=this;q.tableProps=function(){q.table(true)};q.table=function(r){function d(){function v(F,G,J){if("TD"===F.tagName||"TH"===F.tagName)x.setStyle(F,G,J);else if(F.children)for(var K=0;K<F.children.length;K++)v(F.children[K],G,J)}var E;A(x,this);u=m.extend(u,this.toJSON());u["class"]===false&&delete u["class"];c.undoManager.transact(function(){if(h||(h=c.plugins.table.insertTable(u.cols||1,u.rows||1)),c.dom.setAttribs(h,{style:u.style,"class":u["class"]}),c.settings.table_style_by_css){if(D=[],
            D.push({name:"border",value:u.border}),D.push({name:"border-spacing",value:e(u.cellspacing)}),C(x,h,D),x.setAttribs(h,{"data-mce-border-color":u.borderColor,"data-mce-cell-padding":u.cellpadding,"data-mce-border":u.border}),h.children)for(var F=0;F<h.children.length;F++){v(h.children[F],"border",u.border);v(h.children[F],"padding",e(u.cellpadding))}}else c.dom.setAttribs(h,{border:u.border,cellpadding:u.cellpadding,cellspacing:u.cellspacing});x.getAttrib(h,"width")&&!c.settings.table_style_by_css?
        x.setAttrib(h,"width",j(u.width)):x.setStyle(h,"width",e(u.width));x.setStyle(h,"height",e(u.height));(E=x.select("caption",h)[0])&&!u.caption&&x.remove(E);!E&&u.caption&&(E=x.create("caption"),E.innerHTML=t.ie?"\u00a0":'<br data-mce-bogus="1"></F>',h.insertBefore(E,h.firstChild));g(h);u.align&&c.formatter.apply("align"+u.align,{},h);c.focus();c.addVisual()})}function p(v,E){var F,G=c.dom.select("td,th",v);return F=function(J,K){for(var L=0;L<K.length;L++){var I=x.getStyle(K[L],E);if("undefined"==typeof J&&
        (J=I),J!=I)return""}return J}(F,G)}var h,n,s,l,D,x=c.dom,u={};r===true?(h=x.getParent(c.selection.getStart(),"table"),h&&(u={width:j(x.getStyle(h,"width")||x.getAttrib(h,"width")),height:j(x.getStyle(h,"height")||x.getAttrib(h,"height")),cellspacing:j(x.getStyle(h,"border-spacing")||x.getAttrib(h,"cellspacing")),cellpadding:x.getAttrib(h,"data-mce-cell-padding")||x.getAttrib(h,"cellpadding")||p(h,"padding"),border:x.getAttrib(h,"data-mce-border")||x.getAttrib(h,"border")||p(h,"border"),borderColor:x.getAttrib(h,
        "data-mce-border-color"),caption:!!x.select("caption",h)[0],"class":x.getAttrib(h,"class")},o("left center right".split(" "),function(v){c.formatter.matchNode(h,"align"+v)&&(u.align=v)}))):(n={label:"Cols",name:"cols"},s={label:"Rows",name:"rows"});c.settings.table_class_list&&(u["class"]&&(u["class"]=u["class"].replace(/\s*mce\-item\-table\s*/g,"")),l={name:"class",type:"listbox",label:"Class",values:k(c.settings.table_class_list,function(v){v.value&&(v.textStyle=function(){return c.formatter.getCssText({block:"table",
        classes:[v.value]})})})});r={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:false,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:c.settings.table_appearance_options!==false?[n,s,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[n,
        s,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},l]};c.settings.table_advtab!==false?(w(x,u,h),c.windowManager.open({title:"Table properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:r},f(x)],onsubmit:d})):c.windowManager.open({title:"Table properties",data:u,body:r,onsubmit:d})};
    q.merge=function(r,d){c.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var p=this.toJSON();c.undoManager.transact(function(){r.merge(d,p.cols,p.rows)})}})};q.cell=function(){function r(){A(n,this);p=m.extend(p,this.toJSON());c.undoManager.transact(function(){o(s,function(l){c.dom.setAttribs(l,{scope:p.scope,style:p.style,"class":p["class"]});c.dom.setStyles(l,
        {width:e(p.width),height:e(p.height)});p.type&&l.nodeName.toLowerCase()!=p.type&&(l=n.rename(l,p.type));g(l);p.align&&c.formatter.apply("align"+p.align,{},l);i(l);p.valign&&c.formatter.apply("valign"+p.valign,{},l)});c.focus()})}var d,p,h,n=c.dom,s=[];if(s=c.dom.select("td.mce-item-selected,th.mce-item-selected"),d=c.dom.getParent(c.selection.getStart(),"td,th"),!s.length&&d&&s.push(d),d=d||s[0]){p={width:j(n.getStyle(d,"width")||n.getAttrib(d,"width")),height:j(n.getStyle(d,"height")||n.getAttrib(d,
        "height")),scope:n.getAttrib(d,"scope"),"class":n.getAttrib(d,"class")};p.type=d.nodeName.toLowerCase();o("left center right".split(" "),function(l){c.formatter.matchNode(d,"align"+l)&&(p.align=l)});o("top middle bottom".split(" "),function(l){c.formatter.matchNode(d,"valign"+l)&&(p.valign=l)});c.settings.table_cell_class_list&&(h={name:"class",type:"listbox",label:"Class",values:k(c.settings.table_cell_class_list,function(l){l.value&&(l.textStyle=function(){return c.formatter.getCssText({block:"td",
        classes:[l.value]})})})});h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:false,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,
        maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",
        value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},h]};c.settings.table_cell_advtab!==false?(w(n,p,d),c.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:p,body:[{title:"General",type:"form",items:h},f(n)],onsubmit:r})):c.windowManager.open({title:"Cell properties",data:p,body:h,onsubmit:r})}};q.row=function(){function r(){var u,v,E;A(D,this);s=m.extend(s,this.toJSON());c.undoManager.transact(function(){var F=s.type;o(x,function(G){c.dom.setAttribs(G,
        {scope:s.scope,style:s.style,"class":s["class"]});c.dom.setStyles(G,{height:e(s.height)});F!=G.parentNode.nodeName.toLowerCase()&&(u=D.getParent(G,"table"),v=G.parentNode,E=D.select(F,u)[0],E||(E=D.create(F),u.firstChild?u.insertBefore(E,u.firstChild):u.appendChild(E)),E.appendChild(G),v.hasChildNodes()||D.remove(v));g(G);s.align&&c.formatter.apply("align"+s.align,{},G)});c.focus()})}var d,p,h,n,s,l,D=c.dom,x=[];d=c.dom.getParent(c.selection.getStart(),"table");p=c.dom.getParent(c.selection.getStart(),
        "td,th");o(d.rows,function(u){o(u.cells,function(v){return D.hasClass(v,"mce-item-selected")||v==p?(x.push(u),false):void 0})});(h=x[0])&&(s={height:j(D.getStyle(h,"height")||D.getAttrib(h,"height")),scope:D.getAttrib(h,"scope"),"class":D.getAttrib(h,"class")},s.type=h.parentNode.nodeName.toLowerCase(),o("left center right".split(" "),function(u){c.formatter.matchNode(h,"align"+u)&&(s.align=u)}),c.settings.table_row_class_list&&(n={name:"class",type:"listbox",label:"Class",values:k(c.settings.table_row_class_list,
        function(u){u.value&&(u.textStyle=function(){return c.formatter.getCssText({block:"tr",classes:[u.value]})})})}),l={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},
        {text:"Right",value:"right"}]},{label:"Height",name:"height"},n]},c.settings.table_row_advtab!==false?(w(D,s,h),c.windowManager.open({title:"Row properties",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},f(D)],onsubmit:r})):c.windowManager.open({title:"Row properties",data:s,body:l,onsubmit:r}))}}});y("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools",
    "tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(m,t,o,c,b,f,j,e){var g=b.each;e.add("table",function(i){function k(l){return function(){i.execCommand(l)}}function A(l,D){var x,u,v,E;v='<table id="__mce"><tbody>';for(x=0;D>x;x++){v+="<tr>";for(u=0;l>u;u++)v+="<td>"+(j.ie?" ":"<br>")+"</td>";v+="</tr>"}return v+="</tbody></table>",i.undoManager.transact(function(){i.insertContent(v);E=i.dom.get("__mce");i.dom.setAttrib(E,"id",null);i.dom.setAttribs(E,i.settings.table_default_attributes||
{});i.dom.setStyles(E,i.settings.table_default_styles||{})}),E}function w(l,D){function x(){l.disabled(!i.dom.getParent(i.selection.getStart(),D));i.selection.selectorChanged(D,function(u){l.disabled(!u)})}i.initialized?x():i.on("init",x)}function C(){w(this,"table")}function q(){w(this,"td,th")}function r(){var l="";l='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var D=0;10>D;D++){l+="<tr>";for(var x=0;10>x;x++)l+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+
(10*D+x)+'" href="#" data-mce-x="'+x+'" data-mce-y="'+D+'"></a></td>';l+="</tr>"}return l+="</table>",l+'<div class="mce-text-center" role="presentation">1 x 1</div>'}function d(l,D,x){var u,v,E,F,G=x.getEl().getElementsByTagName("table")[0],J=x.isRtl()||"tl-tr"==x.parent().rel;G.nextSibling.innerHTML=l+1+" x "+(D+1);J&&(l=9-l);for(u=0;10>u;u++)for(x=0;10>x;x++){E=G.rows[u].childNodes[x].firstChild;F=(J?x>=l:l>=x)&&D>=u;i.dom.toggleClass(E,"mce-active",F);F&&(v=E)}return v.parentNode}var p,h=this,
    n=new c(i);i.settings.table_grid===false?i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:n.table}):i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(l){l.aria&&(this.parent().hideAll(),l.stopImmediatePropagation(),n.table())},onshow:function(){d(0,0,this.menu.items()[0])},onhide:function(){var l=this.menu.items()[0].getEl().getElementsByTagName("a");i.dom.removeClass(l,"mce-active");i.dom.addClass(l[0],
    "mce-active")},menu:[{type:"container",html:r(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(l){var D,x,u=l.target;"A"==u.tagName.toUpperCase()&&(D=parseInt(u.getAttribute("data-mce-x"),10),x=parseInt(u.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(D=9-D),(D!==this.lastX||x!==this.lastY)&&(d(D,x,l.control),this.lastX=D,this.lastY=x))},onclick:function(l){var D=this;"A"==l.target.tagName.toUpperCase()&&(l.preventDefault(),l.stopPropagation(),D.parent().cancel(),
    i.undoManager.transact(function(){A(D.lastX+1,D.lastY+1)}),i.addVisual())}}]});i.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:C,onclick:n.tableProps});i.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:C,cmd:"mceTableDelete"});i.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:k("mceTableCellProps"),onPostRender:q},{text:"Merge cells",onclick:k("mceTableMergeCells"),onPostRender:q},
    {text:"Split cell",onclick:k("mceTableSplitCells"),onPostRender:q}]});i.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:k("mceTableInsertRowBefore"),onPostRender:q},{text:"Insert row after",onclick:k("mceTableInsertRowAfter"),onPostRender:q},{text:"Delete row",onclick:k("mceTableDeleteRow"),onPostRender:q},{text:"Row properties",onclick:k("mceTableRowProps"),onPostRender:q},{text:"-"},{text:"Cut row",onclick:k("mceTableCutRow"),onPostRender:q},{text:"Copy row",
    onclick:k("mceTableCopyRow"),onPostRender:q},{text:"Paste row before",onclick:k("mceTablePasteRowBefore"),onPostRender:q},{text:"Paste row after",onclick:k("mceTablePasteRowAfter"),onPostRender:q}]});i.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:k("mceTableInsertColBefore"),onPostRender:q},{text:"Insert column after",onclick:k("mceTableInsertColAfter"),onPostRender:q},{text:"Delete column",onclick:k("mceTableDeleteCol"),onPostRender:q}]});var s=[];
    g("inserttable tableprops deletetable | cell row column".split(" "),function(l){s.push("|"==l?{text:"-"}:i.menuItems[l])});i.addButton("table",{type:"menubutton",title:"Table",menu:s});j.isIE||i.on("click",function(l){l=l.target;"TABLE"===l.nodeName&&(i.selection.select(l),i.nodeChanged())});h.quirks=new t(i);i.on("Init",function(){h.cellSelection=new o(i)});i.on("PreInit",function(){i.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(l,D){for(var x=
        l.length;x--;)l[x].attr(D,null)})});g({mceTableSplitCells:function(l){l.split()},mceTableMergeCells:function(l){var D;D=i.dom.getParent(i.selection.getStart(),"th,td");i.dom.select("td.mce-item-selected,th.mce-item-selected").length?l.merge():n.merge(l,D)},mceTableInsertRowBefore:function(l){l.insertRow(true)},mceTableInsertRowAfter:function(l){l.insertRow()},mceTableInsertColBefore:function(l){l.insertCol(true)},mceTableInsertColAfter:function(l){l.insertCol()},mceTableDeleteCol:function(l){l.deleteCols()},
        mceTableDeleteRow:function(l){l.deleteRows()},mceTableCutRow:function(l){p=l.cutRows()},mceTableCopyRow:function(l){p=l.copyRows()},mceTablePasteRowBefore:function(l){l.pasteRows(p,true)},mceTablePasteRowAfter:function(l){l.pasteRows(p)},mceTableDelete:function(l){l.deleteTable()}},function(l,D){i.addCommand(D,function(){var x=new m(i);x&&(l(x),i.execCommand("mceRepaint"),h.cellSelection.clear())})});g({mceInsertTable:n.table,mceTableProps:function(){n.table(true)},mceTableRowProps:n.row,mceTableCellProps:n.cell},
        function(l,D){i.addCommand(D,function(x,u){l(u)})});i.settings.table_tab_navigation!==false&&i.on("keydown",function(l){var D,x,u;9==l.keyCode&&(D=i.dom.getParent(i.selection.getStart(),"th,td"),D&&(l.preventDefault(),x=new m(i),u=l.shiftKey?-1:1,i.undoManager.transact(function(){!x.moveRelIdx(D,u)&&u>0&&(x.insertRow(),x.refresh(),x.moveRelIdx(D,u))})))});h.insertTable=A})})})(this);
tinymce.PluginManager.add("visualchars",function(a){function z(m){function t(k){return'<span data-mce-bogus="1" class="mce-'+e[k]+'">'+k+"</span>"}function o(){var k,A="";for(k in e){A&&(A+=",");A+="span.mce-"+e[k]}return A}var c,b,f,j,e,g;c=a.getBody();var i=a.selection;if(e={"\u00a0":"nbsp","\u00ad":"shy"},y=!y,B.state=y,a.fire("VisualChars",{state:y}),g=function(){var k,A="";for(k in e)A+=k;return RegExp("["+A+"]","g")}(),m&&(j=i.getBookmark()),y){b=[];tinymce.walk(c,function(k){3==k.nodeType&&
k.nodeValue&&g.test(k.nodeValue)&&b.push(k)},"childNodes");for(m=0;m<b.length;m++){c=b[m].nodeValue;c=c.replace(g,t);for(f=a.dom.create("div",null,c);c=f.lastChild;)a.dom.insertAfter(c,b[m]);a.dom.remove(b[m])}}else{b=a.dom.select(o(),c);for(m=b.length-1;m>=0;m--)a.dom.remove(b[m],1)}i.moveToBookmark(j)}function H(){var m=this;a.on("VisualChars",function(t){m.active(t.state)})}var y,B=this;a.addCommand("mceVisualChars",z);a.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",
    onPostRender:H});a.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:H,selectable:true,context:"view",prependToContext:true});a.on("beforegetcontent",function(m){y&&"raw"!=m.format&&!m.draft&&(y=true,z(false))})});
tinymce.PluginManager.add("wordcount",function(a){function z(){a.theme.panel.find("#wordcount").text(["Words: {0}",B.getCount()])}var H,y,B=this;H=a.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g);y=a.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g);a.on("init",function(){var m=a.theme.panel&&a.theme.panel.find("#statusbar")[0];m&&window.setTimeout(function(){m.insert({type:"label",name:"wordcount",text:["Words: {0}",B.getCount()],classes:"wordcount",disabled:a.settings.readonly},
    0);a.on("setcontent beforeaddundo",z);a.on("keyup",function(t){32==t.keyCode&&z()})},0)});B.getCount=function(){var m=a.getContent({format:"raw"}),t=0;if(m){m=m.replace(/\.\.\./g," ");m=m.replace(/<.[^<>]*?>/g," ").replace(/ | /gi," ");m=m.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," ");m=m.replace(y,"");(m=m.match(H))&&(t=m.length)}return t}});
tinymce.PluginManager.add("filemanager",function(a){function z(){var H=a.dom;$.fn.upload_elfinder({selected:function(y){y=_.first(y);var B={href:y.url.to_url(),target:"_blank",rel:null,"class":null,title:y.name};a.insertContent(H.createHTML("a",B,H.encode(y.name)))}})}a.addButton("filemanager",{icon:"browse",tooltip:"Insert file",onclick:z,stateSelector:"img:not([data-mce-object])"});a.addMenuItem("filemanager",{icon:"browse",text:"Insert file",onclick:z,context:"insert",prependToContext:true})});
tinymce.PluginManager.add("advlist",function(a){function z(o,c){var b=[];return tinymce.each(c.split(/[ ,]/),function(f){b.push({text:f.replace(/\-/g," ").replace(/\b\w/g,function(j){return j.toUpperCase()}),data:"default"==f?"":f})}),b}function H(o,c){a.undoManager.transact(function(){var b,f=a.dom,j=a.selection;(b=f.getParent(j.getNode(),"ol,ul"))&&b.nodeName==o&&c!==false||a.execCommand("UL"==o?"InsertUnorderedList":"InsertOrderedList");c=c===false?t[o]:c;t[o]=c;(b=f.getParent(j.getNode(),"ol,ul"))&&
(f.setStyle(b,"listStyleType",c?c:null),b.removeAttribute("data-mce-style"));a.focus()})}function y(o){var c=a.dom.getStyle(a.dom.getParent(a.selection.getNode(),"ol,ul"),"listStyleType")||"";o.control.items().each(function(b){b.active(b.settings.data===c)})}var B,m,t={};B=z("OL",a.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"));m=z("UL",a.getParam("advlist_bullet_styles","default,circle,disc,square"));a.addButton("numlist",{type:"splitbutton",
    tooltip:"Numbered list",menu:B,onshow:y,onselect:function(o){H("OL",o.control.settings.data)},onclick:function(){H("OL",false)}});a.addButton("bullist",{type:"splitbutton",tooltip:"Bullet list",menu:m,onshow:y,onselect:function(o){H("UL",o.control.settings.data)},onclick:function(){H("UL",false)}})});
(function(a,z){function H(m,t){for(var o,c=[],b=0;b<m.length;++b){var f;if(!(f=B[m[b]]))a:{f=a;for(var j=m[b].split(/[.\/]/),e=0;e<j.length;++e){if(!f[j[e]]){f=void 0;break a}f=f[j[e]]}}if(o=f,!o)throw"module definition dependecy not found: "+m[b];c.push(o)}t.apply(null,c)}function y(m,t,o){if("string"!=typeof m)throw"invalid module definition, module id must be defined and be a string";if(t===z)throw"invalid module definition, dependencies must be specified";if(o===z)throw"invalid module definition, definition function must be specified";
    H(t,function(){B[m]=o.apply(null,arguments)})}var B={};y("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(m,t,o){function c(b,f){return m.each(f,function(j){b=j.constructor==RegExp?b.replace(j,""):b.replace(j[0],j[1])}),b}return{filter:c,innerText:function(b){function f(w){var C=w.name,q=w;if("br"===C)return void(g+="\n");if(i[C]&&(g+=" "),k[C])return void(g+=" ");if(3==w.type&&(g+=w.value),!w.shortEnded&&(w=w.firstChild)){do f(w);while(w=
    w.next)}A[C]&&q.next&&(g+="\n","p"==C&&(g+="\n"))}var j=new o,e=new t({},j),g="",i=j.getShortEndedElements(),k=m.makeMap("script noscript style textarea video audio iframe object"," "),A=j.getBlockElements();return b=c(b,[/<!\[[^\]]+\]>/g]),f(e.parse(b)),g},trimHtml:function(b){return b=c(b,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<\!--StartFragment--\>|<\!--EndFragment--\>/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(f,j,e){return j||e?"\u00a0":" "}],/<br>$/i])}}});
    y("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils"],function(m,t,o,c){return function(b){function f(x){var u,v=b.dom;if(u=b.fire("BeforePastePreProcess",{content:x}),u=b.fire("PastePreProcess",u),x=u.content,!u.isDefaultPrevented()){if(b.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()){x=v.add(b.getBody(),"div",{style:"display:none"},x);u=b.fire("PastePostProcess",{node:x});v.remove(x);x=u.node.innerHTML}u.isDefaultPrevented()||
    b.insertContent(x,{merge:b.settings.paste_merge_formats!==false})}}function j(x){x=b.dom.encode(x).replace(/\r\n/g,"\n");var u,v=b.dom.getParent(b.selection.getStart(),b.dom.isBlock),E=b.settings.forced_root_block;E&&(u=b.dom.createHTML(E,b.settings.forced_root_block_attrs),u=u.substr(0,u.length-3)+">");v&&/^(PRE|DIV)$/.test(v.nodeName)||!E?x=c.filter(x,[[/\n/g,"<br>"]]):(x=c.filter(x,[[/\n\n/g,"</p>"+u],[/^(.*<\/p>)(<p>)$/,u+"$1"],[/\n/g,"<br />"]]),-1!=x.indexOf("<p>")&&(x=u+x));f(x)}function e(){function x(J){var K,
        L,I;I=J.startContainer;if(K=J.getClientRects(),K.length)return K[0];if(J.collapsed&&1==I.nodeType){for(I=I.childNodes[d.startOffset];I&&3==I.nodeType&&!I.data.length;)I=I.nextSibling;if(I)return"BR"==I.tagName&&(L=v.doc.createTextNode("\ufeff"),I.parentNode.insertBefore(L,I),J=v.createRng(),J.setStartBefore(L),J.setEndAfter(L),K=J.getClientRects(),v.remove(L)),K.length?K[0]:void 0}}var u,v=b.dom,E=b.getBody(),F=b.dom.getViewPort(b.getWin()).y,G=20;if(d=b.selection.getRng(),b.inline&&(u=b.selection.getScrollContainer(),
        u&&u.scrollTop>0&&(F=u.scrollTop)),d.getClientRects)if(G=x(d))G=F+(G.top-v.getPos(E).y);else{G=F;(F=d.startContainer)&&(3==F.nodeType&&F.parentNode!=E&&(F=F.parentNode),1==F.nodeType&&(G=v.getPos(F,u||E).y))}r=v.add(b.getBody(),"div",{id:"mcepastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: absolute; top: "+G+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},l);(m.ie||m.gecko)&&v.setStyle(r,"left","rtl"==v.getStyle(E,"direction",true)?65535:-65535);v.bind(r,"beforedeactivate focusin focusout",
        function(J){J.stopPropagation()});r.focus();b.selection.select(r,true)}function g(){if(r){for(var x;x=b.dom.get("mcepastebin");){b.dom.remove(x);b.dom.unbind(x)}d&&b.selection.setRng(d)}r=d=null}function i(){var x,u,v,E="";x=b.dom.select("div[id=mcepastebin]");for(u=0;u<x.length;u++){v=x[u];v.firstChild&&"mcepastebin"==v.firstChild.id&&(v=v.firstChild);v=v.innerHTML;E!=l&&(E+=v)}return E}function k(x){var u={};if(x){if(x.getData){var v=x.getData("Text");v&&v.length>0&&-1==v.indexOf(D)&&(u["text/plain"]=
        v)}if(x.types)for(v=0;v<x.types.length;v++){var E=x.types[v];u[E]=x.getData(E)}}return u}function A(x,u){function v(F){function G(M){u&&(b.selection.setRng(u),u=null);f('<img src="'+M.result+'">')}var J,K,L,I=false;if(F)for(J=0;J<F.length;J++){K=F[J];/^image\/(jpeg|png|gif|bmp)$/.test(K.type)&&(L=new FileReader,L.onload=G.bind(null,L),L.readAsDataURL(K.getAsFile?K.getAsFile():K),x.preventDefault(),I=true)}return I}var E=x.clipboardData||x.dataTransfer;return b.settings.paste_data_images&&E?v(E.items)||
    v(E.files):void 0}function w(x){x=x.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&x&&x.items&&0===x.items.length}function C(x){return o.metaKeyPressed(x)&&86==x.keyCode||x.shiftKey&&45==x.keyCode}function q(){b.on("keydown",function(x){function u(v){C(v)&&!v.isDefaultPrevented()&&g()}if(C(x)&&!x.isDefaultPrevented())if(!(p=x.shiftKey&&86==x.keyCode,p&&m.webkit&&-1!=navigator.userAgent.indexOf("Version/"))){if(x.stopImmediatePropagation(),n=(new Date).getTime(),m.ie&&p)return x.preventDefault(),
        void b.fire("paste",{ieFake:true});g();e();b.once("keyup",u);b.once("paste",function(){b.off("keyup",u)})}});b.on("paste",function(x){var u=(new Date).getTime(),v=k(x.clipboardData||b.getDoc().dataTransfer);u=(new Date).getTime()-u;var E=(new Date).getTime()-n-u<1E3,F="text"==h.pasteFormat||p;return p=false,x.isDefaultPrevented()||w(x)?void g():A(x)?void g():(E||x.preventDefault(),!m.ie||E&&!x.ieFake||(e(),b.dom.bind(r,"paste",function(G){G.stopPropagation()}),b.getDoc().execCommand("Paste",false,
        null),v["text/html"]=i()),void setTimeout(function(){var G;return"text/html"in v&&v["text/html"].length>0||(G=i(),G==l&&(F=true)),G=c.trimHtml(G),r&&r.firstChild&&"mcepastebin"===r.firstChild.id&&(F=true),g(),G.length||(F=true),F&&(G="text/plain"in v&&v["text/plain"].length>0&&-1==G.indexOf("</p>")?v["text/plain"]:c.innerText(G)),G==l?void(E||b.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(F?j(G):f(G))},0))});b.on("dragstart dragend",function(x){s="dragstart"==
    x.type});b.on("drop",function(x){var u=t.getCaretRangeFromPoint(x.clientX,x.clientY,b.getDoc());if(!x.isDefaultPrevented()&&!s&&!A(x,u)&&u&&b.settings.paste_filter_drop!==false){var v=k(x.dataTransfer),E=v["mce-internal"]||v["text/html"]||v["text/plain"];E&&(x.preventDefault(),b.undoManager.transact(function(){v["mce-internal"]&&b.execCommand("Delete");b.selection.setRng(u);E=c.trimHtml(E);v["text/html"]?f(E):j(E)}))}});b.on("dragover dragend",function(x){b.settings.paste_data_images&&x.preventDefault()})}
        var r,d,p,h=this,n=0,s=false,l="%MCEPASTEBIN%",D="data:text/mce-internal,";h.pasteHtml=f;h.pasteText=j;b.on("preInit",function(){q();b.parser.addNodeFilter("img",function(x){if(!b.settings.paste_data_images)for(var u=x.length;u--;){var v=x[u].attributes.map.src;v&&/^(data:image|webkit\-fake\-url)/.test(v)&&(x[u].attr("data-mce-object")||v===m.transparentSrc||x[u].remove())}})})}});y("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer",
        "tinymce/html/Node","tinymce/pasteplugin/Utils"],function(m,t,o,c,b,f){function j(i){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(i)||/class="OutlineElement/.test(i)||/id="?docs\-internal\-guid\-/.test(i)}function e(i){var k,A;return A=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,
        /^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],i=i.replace(/^[\u00a0 ]+/,""),m.each(A,function(w){return w.test(i)?(k=true,false):void 0}),k}function g(i){var k=i.settings;i.on("BeforePastePreProcess",function(A){function w(n){function s(L){var I="";if(3===L.type)return L.value;if(L=L.firstChild){do I+=s(L);while(L=L.next)}return I}function l(L,I){if(3===L.type&&I.test(L.value))return L.value=L.value.replace(I,""),false;if(L=L.firstChild){do if(!l(L,I))return false;
    while(L=L.next)}return true}function D(L){if(L._listIgnore)return void L.remove();if(L=L.firstChild){do D(L);while(L=L.next)}}function x(L,I,M){var N=L._listLevel||E;N!=E&&(E>N?u&&(u=u.parent.parent):(v=u,u=null));u&&u.name==I?u.append(L):(v=v||u,u=new b(I,1),M>1&&u.attr("start",""+M),L.wrap(u));L.name="li";N>E&&v&&v.lastChild.append(u);E=N;D(L);l(L,/^\u00a0+/);l(L,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);l(L,/^\u00a0+/)}for(var u,v,E=1,F=[],G=n.firstChild;"undefined"!=typeof G&&null!==G;)if(F.push(G),
            G=G.walk(),null!==G)for(;"undefined"!=typeof G&&G.parent!==n;)G=G.walk();for(G=0;G<F.length;G++){if(n=F[G],"p"==n.name&&n.firstChild){var J=s(n);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(J)){x(n,"ul");continue}if(e(J)){J=/([0-9]+)\./.exec(J);var K=1;J&&(K=parseInt(J[1],10));x(n,"ol",K);continue}if(n._listLevel){x(n,"ul",1);continue}}else v=u;u=null}}function C(n,s){var l,D={},x=i.dom.parseStyle(s);return m.each(x,function(u,v){switch(v){case "mso-list":(l=/\w+ \w+([0-9]+)/i.exec(s))&&(n._listLevel=
        parseInt(l[1],10));/Ignore/i.test(u)&&n.firstChild&&(n._listIgnore=true,n.firstChild._listIgnore=true);break;case "horiz-align":v="text-align";break;case "vert-align":v="vertical-align";break;case "font-color":case "mso-foreground":v="color";break;case "mso-background":case "mso-highlight":v="background";break;case "font-weight":case "font-style":return void("normal"!=u&&(D[v]=u));case "mso-element":if(/^(comment|comment-list)$/i.test(u))return void n.remove()}return 0===v.indexOf("mso-comment")?
        void n.remove():void(0!==v.indexOf("mso-")&&("all"==q||r&&r[v])&&(D[v]=u))}),/(bold)/i.test(D["font-weight"])&&(delete D["font-weight"],n.wrap(new b("b",1))),/(italic)/i.test(D["font-style"])&&(delete D["font-style"],n.wrap(new b("i",1))),D=i.dom.serializeStyle(D,n.name),D?D:null}var q,r,d=A.content;if(d=d.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),d=d.replace(/<br class="?Apple-interchange-newline"?>/gi,""),q=k.paste_retain_style_properties,q&&(r=m.makeMap(q.split(/[, ]/))),k.paste_enable_default_filters!==
        false&&j(A.content)){A.wordContent=true;d=f.filter(d,[/<\!--[\s\S]+?--\>/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/ /gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,s){return s.length>0?s.replace(/./," ").slice(Math.floor(s.length/2)).split("").join("\u00a0"):""}]]);var p=k.paste_word_valid_elements;p||(p="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");
        p=new o({valid_elements:p,valid_children:"-li[p]"});m.each(p.elements,function(n){n.attributes["class"]||(n.attributes["class"]={},n.attributesOrder.push("class"));n.attributes.style||(n.attributes.style={},n.attributesOrder.push("style"))});var h=new t({},p);h.addAttributeFilter("style",function(n){for(var s,l=n.length;l--;){s=n[l];s.attr("style",C(s,s.attr("style")));"span"==s.name&&s.parent&&!s.attributes.length&&s.unwrap()}});h.addAttributeFilter("class",function(n){for(var s,l,D=n.length;D--;){s=
            n[D];l=s.attr("class");/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(l)&&s.remove();s.attr("class",null)}});h.addNodeFilter("del",function(n){for(var s=n.length;s--;)n[s].remove()});h.addNodeFilter("a",function(n){for(var s,l,D,x=n.length;x--;)if(s=n[x],l=s.attr("href"),D=s.attr("name"),l&&-1!=l.indexOf("#_msocom_"))s.remove();else if(l&&0===l.indexOf("file://")&&(l=l.split("#")[1],l&&(l="#"+l)),l||D)D&&!/^_?(?:toc|edn|ftn)/i.test(D)?s.unwrap():s.attr({href:l,name:D});else s.unwrap()});d=
            h.parse(d);k.paste_convert_word_fake_lists!==false&&w(d);A.content=(new c({},p)).serialize(d)}})}return g.isWordContent=j,g});y("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(m,t,o,c){return function(b){function f(g){b.on("BeforePastePreProcess",function(i){i.content=g(i.content)})}function j(g){if(!o.isWordContent(g))return g;var i=[];t.each(b.schema.getBlockElements(),function(A,w){i.push(w)});var k=RegExp("(?:<br> [\\s\\r\\n]+|<br>)*(<\\/?("+
    i.join("|")+")[^>]*>)(?:<br> [\\s\\r\\n]+|<br>)*","g");return g=c.filter(g,[[k,"$1"]]),g=c.filter(g,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function e(g){if(o.isWordContent(g))return g;var i=b.settings.paste_webkit_styles;if(b.settings.paste_remove_styles_if_webkit===false||"all"==i)return g;if(i&&(i=i.split(/[, ]/)),i){var k=b.dom,A=b.selection.getNode();g=g.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(w,C,q,r){w=k.parseStyle(q,"span");q={};if("none"===i)return C+
        r;for(var d=0;d<i.length;d++){var p=w[i[d]],h=k.getStyle(A,i[d],true);/color/.test(i[d])&&(p=k.toHex(p),h=k.toHex(h));h!=p&&(q[i[d]]=p)}return q=k.serializeStyle(q,"span"),q?C+' style="'+q+'"'+r:C+r})}else g=g.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return g=g.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(w,C,q,r){return C+' style="'+q+'"'+r})}m.webkit&&f(e);m.ie&&f(j)}});y("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter",
        "tinymce/pasteplugin/Quirks"],function(m,t,o,c){var b;m.add("paste",function(f){function j(){"text"==e.pasteFormat?(this.active(false),e.pasteFormat="html"):(e.pasteFormat="text",this.active(true),b||(f.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),b=true))}var e,g=this,i=f.settings;g.clipboard=e=new t(f);g.quirks=new c(f);g.wordFilter=new o(f);f.settings.paste_as_text&&(g.clipboard.pasteFormat="text");i.paste_preprocess&&
    f.on("PastePreProcess",function(k){i.paste_preprocess.call(g,g,k)});i.paste_postprocess&&f.on("PastePostProcess",function(k){i.paste_postprocess.call(g,g,k)});f.addCommand("mceInsertClipboardContent",function(k,A){A.content&&g.clipboard.pasteHtml(A.content);A.text&&g.clipboard.pasteText(A.text)});f.paste_block_drop&&f.on("dragend dragover draggesture dragdrop drop drag",function(k){k.preventDefault();k.stopPropagation()});f.settings.paste_data_images||f.on("drop",function(k){var A=k.dataTransfer;
        A&&A.files&&A.files.length>0&&k.preventDefault()});f.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:j,active:"text"==g.clipboard.pasteFormat});f.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:e.pasteFormat,onclick:j})})});(function(m){for(var t=0;t<m.length;t++){for(var o=a,c=m[t],b=c.split(/[.\/]/),f=0;f<b.length-1;++f){o[b[f]]===z&&(o[b[f]]={});o=o[b[f]]}o[b[b.length-1]]=B[c]}})(["tinymce/pasteplugin/Utils"])})(this);
tinymce.PluginManager.add("anchor",function(a){function z(){var H=a.selection.getNode(),y="";"A"==H.tagName&&(y=H.name||H.id||"");a.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:y},onsubmit:function(B){a.execCommand("mceInsertContent",false,a.dom.createHTML("a",{id:B.data.name}))}})}a.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:z,stateSelector:"a:not([href])"});a.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:z})});
tinymce.PluginManager.add("autolink",function(a){function z(y,B,m){function t(i,k){if(0>k&&(k=0),3==i.nodeType){var A=i.data.length;k>A&&(k=A)}return k}function o(i,k){1!=i.nodeType||i.hasChildNodes()?b.setStart(i,t(i,k)):b.setStartBefore(i)}function c(i,k){1!=i.nodeType||i.hasChildNodes()?b.setEnd(i,t(i,k)):b.setEndAfter(i)}var b,f,j,e,g;if(b=y.selection.getRng(true).cloneRange(),b.startOffset<5){if(f=b.endContainer.previousSibling,!f){if(!b.endContainer.firstChild||!b.endContainer.firstChild.nextSibling)return;
    f=b.endContainer.firstChild.nextSibling}if(g=f.length,o(f,g),c(f,g),b.endOffset<5)return;B=b.endOffset;j=f}else{if(j=b.endContainer,3!=j.nodeType&&j.firstChild){for(;3!=j.nodeType&&j.firstChild;)j=j.firstChild;3==j.nodeType&&(o(j,0),c(j,j.nodeValue.length))}B=1==b.endOffset?2:b.endOffset-1-B}f=B;do{o(j,B>=2?B-2:0);c(j,B>=1?B-1:0);B-=1;g=b.toString()}while(" "!=g&&""!==g&&160!=g.charCodeAt(0)&&B-2>=0&&g!=m);b.toString()==m||160==b.toString().charCodeAt(0)?(o(j,B),c(j,f),B+=1):0===b.startOffset?(o(j,
    0),c(j,f)):(o(j,B),c(j,f));m=b.toString();"."==m.charAt(m.length-1)&&c(j,f-1);m=b.toString();(j=m.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i))&&("www."==j[1]?j[1]="http://www.":/@$/.test(j[1])&&!/^mailto:/.test(j[1])&&(j[1]="mailto:"+j[1]),e=y.selection.getBookmark(),y.selection.setRng(b),y.execCommand("createlink",false,j[1]+j[2]),y.selection.moveToBookmark(e),y.nodeChanged())}var H;return a.on("keydown",function(y){13==y.keyCode&&z(a,-1,"",false)}),
    tinymce.Env.ie?void a.on("focus",function(){if(!H){H=true;try{a.execCommand("AutoUrlDetect",false,true)}catch(y){}}}):(a.on("keypress",function(y){41==y.keyCode&&z(a,-1,"(",true)}),void a.on("keyup",function(y){32==y.keyCode&&z(a,0,"",true)}))});
tinymce.PluginManager.add("autoresize",function(a){function z(m){var t,o,c,b,f,j,e,g,i,k,A=tinymce.DOM;if(o=a.getDoc()){if(c=o.body,o=o.documentElement,b=y.autoresize_min_height,!c||m&&"setcontent"===m.type&&m.initial||a.plugins.fullscreen&&a.plugins.fullscreen.isFullscreen())return void(c&&o&&(c.style.overflowY="auto",o.style.overflowY="auto"));f=a.dom.getStyle(c,"margin-top",true);j=a.dom.getStyle(c,"margin-bottom",true);e=a.dom.getStyle(c,"padding-top",true);g=a.dom.getStyle(c,"padding-bottom",
    true);i=a.dom.getStyle(c,"border-top-width",true);k=a.dom.getStyle(c,"border-bottom-width",true);f=c.offsetHeight+parseInt(f,10)+parseInt(j,10)+parseInt(e,10)+parseInt(g,10)+parseInt(i,10)+parseInt(k,10);(isNaN(f)||0>=f)&&(f=tinymce.Env.ie?c.scrollHeight:tinymce.Env.webkit&&0===c.clientHeight?0:c.offsetHeight);f>y.autoresize_min_height&&(b=f);y.autoresize_max_height&&f>y.autoresize_max_height?(b=y.autoresize_max_height,c.style.overflowY="auto",o.style.overflowY="auto"):(c.style.overflowY="hidden",
    o.style.overflowY="hidden",c.scrollTop=0);b!==B&&(t=b-B,A.setStyle(a.iframeElement,"height",b+"px"),B=b,tinymce.isWebKit&&0>t&&z(m))}}function H(m,t,o){setTimeout(function(){z({});m--?H(m,t,o):o&&o()},t)}var y=a.settings,B=0;a.settings.inline||(y.autoresize_min_height=parseInt(a.getParam("autoresize_min_height",a.getElement().offsetHeight),10),y.autoresize_max_height=parseInt(a.getParam("autoresize_max_height",0),10),a.on("init",function(){var m,t;m=a.getParam("autoresize_overflow_padding",1);t=a.getParam("autoresize_bottom_margin",
    50);m!==false&&a.dom.setStyles(a.getBody(),{paddingLeft:m,paddingRight:m});t!==false&&a.dom.setStyles(a.getBody(),{paddingBottom:t})}),a.on("nodechange setcontent keyup FullscreenStateChanged",z),a.getParam("autoresize_on_init",true)&&a.on("init",function(){H(20,100,function(){H(5,1E3)})}),a.addCommand("mceAutoResize",z))});
tinymce.PluginManager.add("code",function(a){function z(){a.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:true,minWidth:a.getParam("code_dialog_width",600),minHeight:a.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:false,style:"direction: ltr; text-align: left"},onSubmit:function(H){a.focus();a.undoManager.transact(function(){a.setContent(H.data.code)});a.selection.setCursorLocation();a.nodeChanged()}}).find("#code").value(a.getContent({source_view:true}))}
    a.addCommand("mceCodeEditor",z);a.addButton("code",{icon:"code",tooltip:"Source code",onclick:z});a.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:z})});
tinymce.PluginManager.add("colorpicker",function(a){function z(H,y){function B(o){o=new tinymce.util.Color(o);var c=o.toRgb();t.fromJSON({r:c.r,g:c.g,b:c.b,hex:o.toHex().substr(1)});m(o.toHex())}function m(o){t.find("#preview")[0].getEl().style.background=o}var t=a.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:y,onchange:function(){var o=this.rgb();t&&(t.find("#r").value(o.r),t.find("#g").value(o.g),
    t.find("#b").value(o.b),t.find("#hex").value(this.value().substr(1)),m(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:false,onchange:function(){var o,c,b=t.find("colorpicker")[0];return o=this.name(),c=this.value(),"hex"==o?(c="#"+c,B(c),void b.value(c)):(c={r:t.find("#r").value(),g:t.find("#g").value(),b:t.find("#b").value()},b.value(c),void B(c))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",
    label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){H("#"+this.toJSON().hex)}});B(y)}a.settings.color_picker_callback||(a.settings.color_picker_callback=z)});
tinymce.PluginManager.add("contextmenu",function(a){var z,H=a.settings.contextmenu_never_use_native;a.on("contextmenu",function(y){var B;B=a.getDoc();if(!y.ctrlKey||H){if(y.preventDefault(),tinymce.Env.mac&&tinymce.Env.webkit&&2==y.button&&B.caretRangeFromPoint&&a.selection.setRng(B.caretRangeFromPoint(y.x,y.y)),B=a.settings.contextmenu||"link image inserttable | cell row column deletetable",z)z.show();else{var m=[];tinymce.each(B.split(/[ ,]/),function(t){var o=a.menuItems[t];"|"==t&&(o={text:t});
    o&&(o.shortcut="",m.push(o))});for(B=0;B<m.length;B++)"|"==m[B].text&&(0===B||B==m.length-1)&&m.splice(B,1);z=(new tinymce.ui.Menu({items:m,context:"contextmenu"})).addClass("contextmenu").renderTo();a.on("remove",function(){z.remove();z=null})}B={x:y.pageX,y:y.pageY};a.inline||(B=tinymce.DOM.getPos(a.getContentAreaContainer()),B.x+=y.clientX,B.y+=y.clientY);z.moveTo(B.x,B.y)}})});
tinymce.PluginManager.add("directionality",function(a){function z(y){var B,m=a.dom,t=a.selection.getSelectedBlocks();t.length&&(B=m.getAttrib(t[0],"dir"),tinymce.each(t,function(o){m.getParent(o.parentNode,"*[dir='"+y+"']",m.getRoot())||(B!=y?m.setAttrib(o,"dir",y):m.setAttrib(o,"dir",null))}),a.nodeChanged())}function H(y){var B=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(m){B.push(m+"[dir="+y+"]")}),B.join(",")}a.addCommand("mceDirectionLTR",function(){z("ltr")});a.addCommand("mceDirectionRTL",
    function(){z("rtl")});a.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:H("ltr")});a.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:H("rtl")})});
tinymce.PluginManager.add("charmap",function(a){function z(){function y(f){for(;f;){if("TD"==f.nodeName)return f;f=f.parentNode}}var B,m,t,o;B='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>';var c=Math.ceil(H.length/25);for(t=0;c>t;t++){B+="<tr>";for(m=0;25>m;m++){var b=t*25+m;if(b<H.length){b=H[b];B+='<td title="'+b[1]+'"><div tabindex="-1" title="'+b[1]+'" role="button">'+(b?String.fromCharCode(parseInt(b[0],10)):" ")+"</div></td>"}else B+="<td ></td>"}B+="</tr>"}B+="</tbody></table>";
    o=a.windowManager.open({title:"Special character",spacing:10,padding:10,items:[{type:"container",html:B,onclick:function(f){var j=f.target;/^(TD|DIV)$/.test(j.nodeName)&&y(j).firstChild&&(a.execCommand("mceInsertContent",false,tinymce.trim(j.innerText||j.textContent)),f.ctrlKey||o.close())},onmouseover:function(f){(f=y(f.target))&&f.firstChild?(o.find("#preview").text(f.firstChild.firstChild.data),o.find("#previewTitle").text(f.title)):(o.find("#preview").text(" "),o.find("#previewTitle").text(" "))}},
        {type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"label",name:"previewTitle",text:" ",style:"text-align: center",border:1,minWidth:140,minHeight:80}]}],buttons:[{text:"Close",onclick:function(){o.close()}}]})}var H=[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],
    ["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],
    ["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],
    ["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],
    ["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],
    ["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],
    ["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],
    ["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353",
        "s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936",
        "Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],
    ["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],
    ["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204",
        "zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]];a.addButton("charmap",{icon:"charmap",tooltip:"Special character",onclick:z});a.addMenuItem("charmap",{icon:"charmap",text:"Special character",onclick:z,context:"insert"})});
tinymce.PluginManager.add("emoticons",function(a,z){var H=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];a.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:true,html:function(){var y;return y='<table role="list" class="mce-grid">',tinymce.each(H,function(B){y+="<tr>";tinymce.each(B,function(m){var t=z+"/img/smiley-"+m+".gif";y+='<td><a href="#" data-mce-url="'+
t+'" data-mce-alt="'+m+'" tabindex="-1" role="option" aria-label="'+m+'"><img src="'+t+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'});y+="</tr>"}),y+="</table>"},onclick:function(y){(y=a.dom.getParent(y.target,"a"))&&(a.insertContent('<img src="'+y.getAttribute("data-mce-url")+'" alt="'+y.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})});
tinymce.PluginManager.add("example",function(a,z){a.addButton("example",{text:"My button",icon:false,onclick:function(){a.windowManager.open({title:"Example plugin",body:[{type:"textbox",name:"title",label:"Title"}],onsubmit:function(H){a.insertContent("Title: "+H.data.title)}})}});a.addMenuItem("example",{text:"Example plugin",context:"tools",onclick:function(){a.windowManager.open({title:"TinyMCE site",url:z+"/dialog.html",width:600,height:400,buttons:[{text:"Insert",onclick:function(){var H=a.windowManager.getWindows()[0];
    a.insertContent(H.getContentWindow().document.getElementById("content").value);H.close()}},{text:"Close",onclick:"close"}]})}})});tinymce._beforeUnloadHandler=function(){var a;return tinymce.each(tinymce.editors,function(z){z.plugins.autosave&&z.plugins.autosave.storeDraft();!a&&z.isDirty()&&z.getParam("autosave_ask_before_unload",true)&&(a=z.translate("You have unsaved changes are you sure you want to navigate away?"))}),a};
tinymce.PluginManager.add("autosave",function(a){function z(i,k){var A={s:1E3,m:6E4};return i=/^(\d+)([ms]?)$/.exec(""+(i||k)),(i[2]?A[i[2]]:1)*parseInt(i,10)}function H(){var i=parseInt(g.getItem(f+"time"),10)||0;return(new Date).getTime()-i>e.autosave_retention?(y(false),false):true}function y(i){g.removeItem(f+"draft");g.removeItem(f+"time");i!==false&&a.fire("RemoveDraft")}function B(){!b()&&a.isDirty()&&(g.setItem(f+"draft",a.getContent({format:"raw",no_events:true})),g.setItem(f+"time",(new Date).getTime()),
    a.fire("StoreDraft"))}function m(){H()&&(a.setContent(g.getItem(f+"draft"),{format:"raw"}),a.fire("RestoreDraft"))}function t(){j||(setInterval(function(){a.removed||B()},e.autosave_interval),j=true)}function o(){var i=this;i.disabled(!H());a.on("StoreDraft RestoreDraft RemoveDraft",function(){i.disabled(!H())});t()}function c(){a.undoManager.beforeChange();m();y();a.undoManager.add()}function b(i){var k=a.settings.forced_root_block;return i=tinymce.trim("undefined"==typeof i?a.getBody().innerHTML:
    i),""===i||RegExp("^<"+k+"[^>]*>((\u00a0| |[ \t]|<br[^>]*>)+?|)</"+k+">|<br>$","i").test(i)}var f,j,e=a.settings,g=tinymce.util.LocalStorage;f=e.autosave_prefix||"tinymce-autosave-{path}{query}-{id}-";f=f.replace(/\{path\}/g,document.location.pathname);f=f.replace(/\{query\}/g,document.location.search);f=f.replace(/\{id\}/g,a.id);e.autosave_interval=z(e.autosave_interval,"30s");e.autosave_retention=z(e.autosave_retention,"20m");a.addButton("restoredraft",{title:"Restore last draft",onclick:c,
    onPostRender:o});a.addMenuItem("restoredraft",{text:"Restore last draft",onclick:c,onPostRender:o,context:"file"});a.settings.autosave_restore_when_empty!==false&&(a.on("init",function(){H()&&b()&&m()}),a.on("saveContent",function(){y()}));window.onbeforeunload=tinymce._beforeUnloadHandler;this.hasDraft=H;this.storeDraft=B;this.restoreDraft=m;this.removeDraft=y;this.isEmpty=b});
(function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(a){var z=this,H=a.getParam("bbcode_dialect","punbb").toLowerCase();a.on("beforeSetContent",function(y){y.content=z["_"+H+"_bbcode2html"](y.content)});a.on("postProcess",function(y){y.set&&(y.content=z["_"+H+"_bbcode2html"](y.content));y.get&&(y.content=z["_"+H+"_html2bbcode"](y.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},
    _punbb_html2bbcode:function(a){function z(H,y){a=a.replace(H,y)}return a=tinymce.trim(a),z(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),z(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),z(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),z(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),z(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,
        "[quote][color=$1]$2[/color][/quote]"),z(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),z(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),z(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),z(/<font>(.*?)<\/font>/gi,"$1"),z(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),z(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),z(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),z(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,
        "[code][b]$1[/b][/code]"),z(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),z(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),z(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),z(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),z(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),z(/<\/(strong|b)>/gi,"[/b]"),z(/<(strong|b)>/gi,"[b]"),z(/<\/(em|i)>/gi,"[/i]"),z(/<(em|i)>/gi,"[i]"),z(/<\/u>/gi,"[/u]"),
        z(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),z(/<u>/gi,"[u]"),z(/<blockquote[^>]*>/gi,"[quote]"),z(/<\/blockquote>/gi,"[/quote]"),z(/<br \/>/gi,"\n"),z(/<br\/>/gi,"\n"),z(/<br>/gi,"\n"),z(/<p>/gi,""),z(/<\/p>/gi,"\n"),z(/ |\u00a0/gi," "),z(/"/gi,'"'),z(/</gi,"<"),z(/>/gi,">"),z(/&/gi,"&"),a},_punbb_bbcode2html:function(a){function z(H,y){a=a.replace(H,y)}return a=tinymce.trim(a),z(/\n/gi,"<br />"),z(/\[b\]/gi,"<strong>"),z(/\[\/b\]/gi,"</strong>"),
        z(/\[i\]/gi,"<em>"),z(/\[\/i\]/gi,"</em>"),z(/\[u\]/gi,"<u>"),z(/\[\/u\]/gi,"</u>"),z(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),z(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),z(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),z(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),z(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span> '),z(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span> '),a}});tinymce.PluginManager.add("bbcode",
    tinymce.plugins.BBCodePlugin)})();tinymce.PluginManager.add("example_dependency",function(){},["example"]);
tinymce.PluginManager.add("fullscreen",function(a){function z(){var f,j,e=window;return e.innerWidth&&e.innerHeight&&(f=e.innerWidth,j=e.innerHeight),{w:f,h:j}}function H(){function f(){b.setStyle(g,"height",z().h-(e.clientHeight-g.clientHeight))}var j,e,g,i,k=document.body,A=document.documentElement;c=!c;e=a.getContainer();j=e.style;g=a.getContentAreaContainer().firstChild;i=g.style;c?(y=i.width,B=i.height,i.width=i.height="100%",t=j.width,o=j.height,j.width=j.height="",b.addClass(k,"mce-fullscreen"),
    b.addClass(A,"mce-fullscreen"),b.addClass(e,"mce-fullscreen"),b.bind(window,"resize",f),f(),m=f):(i.width=y,i.height=B,t&&(j.width=t),o&&(j.height=o),b.removeClass(k,"mce-fullscreen"),b.removeClass(A,"mce-fullscreen"),b.removeClass(e,"mce-fullscreen"),b.unbind(window,"resize",m));a.fire("FullscreenStateChanged",{state:c})}var y,B,m,t,o,c=false,b=tinymce.DOM;return a.settings.inline?void 0:(a.on("init",function(){a.addShortcut("Meta+Alt+F","",H)}),a.on("remove",function(){m&&b.unbind(window,"resize",
    m)}),a.addCommand("mceFullScreen",H),a.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Alt+F",selectable:true,onClick:H,onPostRender:function(){var f=this;a.on("FullscreenStateChanged",function(j){f.active(j.state)})},context:"view"}),a.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Meta+Alt+F",onClick:H,onPostRender:function(){var f=this;a.on("FullscreenStateChanged",function(j){f.active(j.state)})}}),{isFullscreen:function(){return c}})});
tinymce.PluginManager.add("hr",function(a){a.addCommand("InsertHorizontalRule",function(){a.execCommand("mceInsertContent",false,"<hr />")});a.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"});a.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})});
tinymce.PluginManager.add("fullpage",function(a){function z(){var b,f,j=y(),e={};return e.fontface=a.getParam("fullpage_default_fontface",""),e.fontsize=a.getParam("fullpage_default_fontsize",""),b=j.firstChild,7==b.type&&(e.xml_pi=true,f=/encoding="([^"]+)"/.exec(b.value),f&&(e.docencoding=f[1])),b=j.getAll("#doctype")[0],b&&(e.doctype="<!DOCTYPE"+b.value+">"),b=j.getAll("title")[0],b&&b.firstChild&&(e.title=b.firstChild.value),o(j.getAll("meta"),function(g){var i,k=g.attr("name"),A=g.attr("http-equiv");
    k?e[k.toLowerCase()]=g.attr("content"):"Content-Type"==A&&(i=/charset\s*=\s*(.*)\s*/gi.exec(g.attr("content")),i&&(e.docencoding=i[1]))}),b=j.getAll("html")[0],b&&(e.langcode=b.attr("lang")||b.attr("xml:lang")||""),e.stylesheets=[],tinymce.each(j.getAll("link"),function(g){"stylesheet"==g.attr("rel")&&e.stylesheets.push(g.attr("href"))}),b=j.getAll("body")[0],b&&(e.langdir=b.attr("dir")||"",e.style=b.attr("style")||"",e.visited_color=b.attr("vlink")||"",e.link_color=b.attr("link")||"",e.active_color=
    b.attr("alink")||""),e}function H(b){function f(C,q,r){C.attr(q,r?r:void 0)}function j(C){g.firstChild?g.insert(C,g.firstChild):g.append(C)}var e,g,i,k,A=a.dom;e=y();(g=e.getAll("head")[0])||(k=e.getAll("html")[0],g=new c("head",1),k.firstChild?k.insert(g,k.firstChild,true):k.append(g));k=e.firstChild;b.xml_pi?(i='version="1.0"',b.docencoding&&(i+=' encoding="'+b.docencoding+'"'),7!=k.type&&(k=new c("xml",7),e.insert(k,e.firstChild,true)),k.value=i):k&&7==k.type&&k.remove();k=e.getAll("#doctype")[0];
    b.doctype?(k||(k=new c("#doctype",10),b.xml_pi?e.insert(k,e.firstChild):j(k)),k.value=b.doctype.substring(9,b.doctype.length-1)):k&&k.remove();k=null;o(e.getAll("meta"),function(C){"Content-Type"==C.attr("http-equiv")&&(k=C)});b.docencoding?(k||(k=new c("meta",1),k.attr("http-equiv","Content-Type"),k.shortEnded=true,j(k)),k.attr("content","text/html; charset="+b.docencoding)):k&&k.remove();k=e.getAll("title")[0];b.title?(k?k.empty():(k=new c("title",1),j(k)),k.append(new c("#text",3)).value=b.title):
    k&&k.remove();o("keywords,description,author,copyright,robots".split(","),function(C){var q,r,d=e.getAll("meta"),p=b[C];for(q=0;q<d.length;q++)if(r=d[q],r.attr("name")==C)return void(p?r.attr("content",p):r.remove());p&&(k=new c("meta",1),k.attr("name",C),k.attr("content",p),k.shortEnded=true,j(k))});var w={};tinymce.each(e.getAll("link"),function(C){"stylesheet"==C.attr("rel")&&(w[C.attr("href")]=C)});tinymce.each(b.stylesheets,function(C){w[C]||(k=new c("link",1),k.attr({rel:"stylesheet",text:"text/css",
        href:C}),k.shortEnded=true,j(k));delete w[C]});tinymce.each(w,function(C){C.remove()});(k=e.getAll("body")[0])&&(f(k,"dir",b.langdir),f(k,"style",b.style),f(k,"vlink",b.visited_color),f(k,"link",b.link_color),f(k,"alink",b.active_color),A.setAttribs(a.getBody(),{style:b.style,dir:b.dir,vLink:b.visited_color,link:b.link_color,aLink:b.active_color}));(k=e.getAll("html")[0])&&(f(k,"lang",b.langcode),f(k,"xml:lang",b.langcode));g.firstChild||g.remove();i=(new tinymce.html.Serializer({validate:false,indent:true,
        apply_source_formatting:true,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"})).serialize(e);m=i.substring(0,i.indexOf("</body>"))}function y(){return(new tinymce.html.DomParser({validate:false,root_name:"#document"})).parse(m)}function B(){var b,f="",j="";return a.getParam("fullpage_default_xml_pi")&&(f+='<?xml version="1.0" encoding="'+a.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),f+=a.getParam("fullpage_default_doctype",
    "<!DOCTYPE html>"),f+="\n<html>\n<head>\n",(b=a.getParam("fullpage_default_title"))&&(f+="<title>"+b+"</title>\n"),(b=a.getParam("fullpage_default_encoding"))&&(f+='<meta http-equiv="Content-Type" content="text/html; charset='+b+'" />\n'),(b=a.getParam("fullpage_default_font_family"))&&(j+="font-family: "+b+";"),(b=a.getParam("fullpage_default_font_size"))&&(j+="font-size: "+b+";"),(b=a.getParam("fullpage_default_text_color"))&&(j+="color: "+b+";"),f+("</head>\n<body"+(j?' style="'+j+'"':"")+">\n")}
    var m,t,o=tinymce.each,c=tinymce.html.Node;a.addCommand("mceFullPageProperties",function(){var b=z();a.windowManager.open({title:"Document properties",data:b,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(f){H(tinymce.extend(b,f.data))}})});a.addButton("fullpage",{title:"Document properties",
        cmd:"mceFullPageProperties"});a.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"});a.on("BeforeSetContent",function(b){function f(C){return C.replace(/<\/?[A-Z]+/g,function(q){return q.toLowerCase()})}var j,e,g=b.content,i="",k=a.dom;if(!b.selection&&!("raw"==b.format&&m||b.source_view&&a.getParam("fullpage_hide_in_source_view"))){0!==g.length||b.source_view||(g=tinymce.trim(m)+"\n"+tinymce.trim(g)+"\n"+tinymce.trim(t));g=g.replace(/<(\/?)BODY/gi,"<$1body");
        j=g.indexOf("<body");-1!=j?(j=g.indexOf(">",j),m=f(g.substring(0,j+1)),e=g.indexOf("</body",j),-1==e&&(e=g.length),b.content=g.substring(j+1,e),t=f(g.substring(e))):(m=B(),t="\n</body>\n</html>");b=y();o(b.getAll("style"),function(C){C.firstChild&&(i+=C.firstChild.value)});(j=b.getAll("body")[0])&&k.setAttribs(a.getBody(),{style:j.attr("style")||"",dir:j.attr("dir")||"",vLink:j.attr("vlink")||"",link:j.attr("link")||"",aLink:j.attr("alink")||""});k.remove("fullpage_styles");var A=a.getDoc().getElementsByTagName("head")[0];
        i&&(k.add(A,"style",{id:"fullpage_styles"},i),j=k.get("fullpage_styles"),j.styleSheet&&(j.styleSheet.cssText=i));var w={};tinymce.each(A.getElementsByTagName("link"),function(C){"stylesheet"==C.rel&&C.getAttribute("data-mce-fullpage")&&(w[C.href]=C)});tinymce.each(b.getAll("link"),function(C){var q=C.attr("href");w[q]||"stylesheet"!=C.attr("rel")||k.add(A,"link",{rel:"stylesheet",text:"text/css",href:q,"data-mce-fullpage":"1"});delete w[q]});tinymce.each(w,function(C){C.parentNode.removeChild(C)})}});
    a.on("GetContent",function(b){b.selection||b.source_view&&a.getParam("fullpage_hide_in_source_view")||(b.content=tinymce.trim(m)+"\n"+tinymce.trim(b.content)+"\n"+tinymce.trim(t))})});
tinymce.PluginManager.add("importcss",function(a){function z(t){return"string"==typeof t?function(o){return-1!==o.indexOf(t)}:t instanceof RegExp?function(o){return t.test(o)}:t}function H(t,o){function c(e,g){var i,k=e.href;if(k&&o(k,g)){m(e.imports,function(w){c(w,true)});try{i=e.cssRules||e.rules}catch(A){}m(i,function(w){w.styleSheet?c(w.styleSheet,true):w.selectorText&&m(w.selectorText.split(","),function(C){b.push(tinymce.trim(C))})})}}var b=[],f={};m(a.contentCSS,function(e){f[e]=true});o||
(o=function(e,g){return g||f[e]});try{m(t.styleSheets,function(e){c(e)})}catch(j){}return b}function y(t){var o,c=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(c){var b=c[1],f=c[2].substr(1).split(".").join(" "),j=tinymce.makeMap("a,img");return c[1]?(o={title:t},a.schema.getTextBlockElements()[b]?o.block=b:a.schema.getBlockElements()[b]||j[b.toLowerCase()]?o.selector=b:o.inline=b):c[2]&&(o={inline:"span",title:t.substr(1),classes:f}),a.settings.importcss_merge_classes!==false?o.classes=f:
    o.attributes={"class":f},o}}var B=this,m=tinymce.each;a.on("renderFormatsMenu",function(t){var o=a.settings,c={},b=o.importcss_selector_converter||y,f=z(o.importcss_selector_filter),j=t.control;a.settings.importcss_append||j.items().remove();var e=[];tinymce.each(o.importcss_groups,function(g){g=tinymce.extend({},g);g.filter=z(g.filter);e.push(g)});m(H(t.doc||a.getDoc(),z(o.importcss_file_filter)),function(g){if(-1===g.indexOf(".mce-")&&!c[g]&&(!f||f(g))){var i,k=b.call(B,g);if(k){var A=k.name||tinymce.DOM.uniqueId();
    if(e)for(var w=0;w<e.length;w++)if(!e[w].filter||e[w].filter(g)){e[w].item||(e[w].item={text:e[w].title,menu:[]});i=e[w].item.menu;break}a.formatter.register(A,k);k=tinymce.extend({},j.settings.itemDefaults,{text:k.title,format:A});i?i.push(k):j.add(k)}c[g]=true}});m(e,function(g){j.add(g.item)});t.control.renderNew()});B.convertSelectorToFormat=y});
tinymce.PluginManager.add("insertdatetime",function(a){function z(f,j){function e(g,i){if(g=""+g,g.length<i)for(var k=0;k<i-g.length;k++)g="0"+g;return g}return j=j||new Date,f=f.replace("%D","%m/%d/%Y"),f=f.replace("%r","%I:%M:%S %p"),f=f.replace("%Y",""+j.getFullYear()),f=f.replace("%y",""+j.getYear()),f=f.replace("%m",e(j.getMonth()+1,2)),f=f.replace("%d",e(j.getDate(),2)),f=f.replace("%H",""+e(j.getHours(),2)),f=f.replace("%M",""+e(j.getMinutes(),2)),f=f.replace("%S",""+e(j.getSeconds(),2)),f=
    f.replace("%I",""+((j.getHours()+11)%12+1)),f=f.replace("%p",""+(j.getHours()<12?"AM":"PM")),f=f.replace("%B",""+a.translate(c[j.getMonth()])),f=f.replace("%b",""+a.translate(o[j.getMonth()])),f=f.replace("%A",""+a.translate(t[j.getDay()])),f=f.replace("%a",""+a.translate(m[j.getDay()])),f=f.replace("%%","%")}function H(f){var j=z(f);if(a.settings.insertdatetime_element){j='<time datetime="'+z(/%[HMSIp]/.test(f)?"%Y-%m-%dT%H:%M":"%Y-%m-%d")+'">'+j+"</time>";if(f=a.dom.getParent(a.selection.getStart(),
        "time"))return void a.dom.setOuterHTML(f,j)}a.insertContent(j)}var y,B,m="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),t="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),o="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="January February March April May June July August September October November December".split(" "),b=[];a.addCommand("mceInsertDate",function(){H(a.getParam("insertdatetime_dateformat",a.translate("%Y-%m-%d")))});a.addCommand("mceInsertTime",
    function(){H(a.getParam("insertdatetime_timeformat",a.translate("%H:%M:%S")))});a.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){H(y||B)},menu:b});tinymce.each(a.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(f){B||(B=f);b.push({text:z(f),onclick:function(){y=f;H(f)}})});a.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:b,context:"insert"})});
tinymce.PluginManager.add("image",function(a){function z(m,t){function o(f,j){c.parentNode&&c.parentNode.removeChild(c);t({width:f,height:j})}var c=document.createElement("img");c.onload=function(){o(c.clientWidth,c.clientHeight)};c.onerror=function(){o()};var b=c.style;b.visibility="hidden";b.position="fixed";b.bottom=b.left=0;b.width=b.height="auto";document.body.appendChild(c);c.src=m}function H(m,t,o){function c(b,f){return f=f||[],tinymce.each(b,function(j){var e={text:j.text||j.title};j.menu?
    e.menu=c(j.menu):(e.value=j.value,t(e));f.push(e)}),f}return c(m,o||[])}function y(m){return function(){var t=a.settings.image_list;"string"==typeof t?tinymce.util.XHR.send({url:t,success:function(o){m(tinymce.util.JSON.parse(o))}}):"function"==typeof t?t(m):m(t)}}function B(m){function t(){var d,p,h,n;d=e.find("#width")[0];p=e.find("#height")[0];d&&p&&(h=d.value(),n=p.value(),e.find("#constrain")[0].checked()&&g&&i&&h&&n&&(g!=h?(n=Math.round(h/g*n),isNaN(n)||p.value(n)):(h=Math.round(n/i*h),isNaN(h)||
d.value(h))),g=h,i=n)}function o(){function d(p){function h(){p.onload=p.onerror=null;a.selection&&(a.selection.select(p),a.nodeChanged())}p.onload=function(){w.width||w.height||!r||C.setAttribs(p,{width:p.clientWidth,height:p.clientHeight});h()};p.onerror=h}f();t();w=tinymce.extend(w,e.toJSON());w.alt||(w.alt="");w.title||(w.title="");""===w.width&&(w.width=null);""===w.height&&(w.height=null);w.style||(w.style=null);w={src:w.src,alt:w.alt,title:w.title,width:w.width,height:w.height,style:w.style,
    "class":w["class"]};a.undoManager.transact(function(){return w.src?(""===w.title&&(w.title=null),q?C.setAttribs(q,w):(w.id="__mcenew",a.focus(),a.selection.setContent(C.createHTML("img",w)),q=C.get("__mcenew"),C.setAttrib(q,"id",null)),void d(q)):void(q&&(C.remove(q),a.focus(),a.nodeChanged()))})}function c(d){return d&&(d=d.replace(/px$/,"")),d}function b(d){if(d.margin){var p=d.margin.split(" ");switch(p.length){case 1:d["margin-top"]=d["margin-top"]||p[0];d["margin-right"]=d["margin-right"]||p[0];
    d["margin-bottom"]=d["margin-bottom"]||p[0];d["margin-left"]=d["margin-left"]||p[0];break;case 2:d["margin-top"]=d["margin-top"]||p[0];d["margin-right"]=d["margin-right"]||p[1];d["margin-bottom"]=d["margin-bottom"]||p[0];d["margin-left"]=d["margin-left"]||p[1];break;case 3:d["margin-top"]=d["margin-top"]||p[0];d["margin-right"]=d["margin-right"]||p[1];d["margin-bottom"]=d["margin-bottom"]||p[2];d["margin-left"]=d["margin-left"]||p[1];break;case 4:d["margin-top"]=d["margin-top"]||p[0];d["margin-right"]=
    d["margin-right"]||p[1];d["margin-bottom"]=d["margin-bottom"]||p[2];d["margin-left"]=d["margin-left"]||p[3]}delete d.margin}return d}function f(){function d(n){return n.length>0&&/^[0-9]+$/.test(n)&&(n+="px"),n}if(a.settings.image_advtab){var p=e.toJSON(),h=C.parseStyle(p.style);h=b(h);p.vspace&&(h["margin-top"]=h["margin-bottom"]=d(p.vspace));p.hspace&&(h["margin-left"]=h["margin-right"]=d(p.hspace));p.border&&(h["border-width"]=d(p.border));e.find("#style").value(C.serializeStyle(C.parseStyle(C.serializeStyle(h))))}}
    function j(){if(a.settings.image_advtab){var d=e.toJSON();d=C.parseStyle(d.style);e.find("#vspace").value("");e.find("#hspace").value("");d=b(d);(d["margin-top"]&&d["margin-bottom"]||d["margin-right"]&&d["margin-left"])&&(e.find("#vspace").value(d["margin-top"]===d["margin-bottom"]?c(d["margin-top"]):""),e.find("#hspace").value(d["margin-right"]===d["margin-left"]?c(d["margin-right"]):""));d["border-width"]&&e.find("#border").value(c(d["border-width"]));e.find("#style").value(C.serializeStyle(C.parseStyle(C.serializeStyle(d))))}}
    var e,g,i,k,A,w={},C=a.dom,q=a.selection.getNode(),r=a.settings.image_dimensions!==false;g=C.getAttrib(q,"width");i=C.getAttrib(q,"height");"IMG"!=q.nodeName||q.getAttribute("data-mce-object")||q.getAttribute("data-mce-placeholder")?q=null:w={src:C.getAttrib(q,"src"),alt:C.getAttrib(q,"alt"),title:C.getAttrib(q,"title"),"class":C.getAttrib(q,"class"),width:g,height:i};m&&(k={type:"listbox",label:"Image list",values:H(m,function(d){d.value=a.convertURL(d.value||d.url,"src")},[{text:"None",value:""}]),
        value:w.src&&a.convertURL(w.src,"src"),onselect:function(d){var p=e.find("#alt");(!p.value()||d.lastControl&&p.value()==d.lastControl.text())&&p.value(d.control.text());e.find("#src").value(d.control.value()).fire("change")},onPostRender:function(){k=this}});a.settings.image_class_list&&(A={name:"class",type:"listbox",label:"Class",values:H(a.settings.image_class_list,function(d){d.value&&(d.textStyle=function(){return a.formatter.getCssText({inline:"img",classes:[d.value]})})})});m=[{name:"src",
        type:"filepicker",filetype:"image",label:"Source",autofocus:true,onchange:function(d){var p,h,n;d=d.meta||{};k&&k.value(a.convertURL(this.value(),"src"));tinymce.each(d,function(s,l){e.find("#"+l).value(s)});d.width||d.height||(p=a.convertURL(this.value(),"src"),h=a.settings.image_prepend_url,n=/^(?:[a-z]+:)?\/\//i,h&&!n.test(p)&&p.substring(0,h.length)!==h&&(p=h+p),this.value(p),z(a.documentBaseURI.toAbsolute(this.value()),function(s){s.width&&s.height&&r&&(g=s.width,i=s.height,e.find("#width").value(g),
            e.find("#height").value(i))}))}},k];a.settings.image_description!==false&&m.push({name:"alt",type:"textbox",label:"Image description"});a.settings.image_title&&m.push({name:"title",type:"textbox",label:"Image Title"});r&&m.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:t,ariaLabel:"Height"},
        {name:"constrain",type:"checkbox",checked:true,text:"Constrain proportions"}]});m.push(A);a.settings.image_advtab?(q&&(q.style.marginLeft&&q.style.marginRight&&q.style.marginLeft===q.style.marginRight&&(w.hspace=c(q.style.marginLeft)),q.style.marginTop&&q.style.marginBottom&&q.style.marginTop===q.style.marginBottom&&(w.vspace=c(q.style.marginTop)),q.style.borderWidth&&(w.border=c(q.style.borderWidth)),w.style=a.dom.serializeStyle(a.dom.parseStyle(a.dom.getAttrib(q,"style")))),e=a.windowManager.open({title:"Insert/edit image",
        data:w,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:j},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:f},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:o})):e=a.windowManager.open({title:"Insert/edit image",data:w,
        body:m,onSubmit:o})}a.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:y(B),stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"});a.addMenuItem("image",{icon:"image",text:"Insert/edit image",onclick:y(B),context:"insert",prependToContext:true});a.addCommand("mceImage",y(B))});
(function(a){a.on("AddEditor",function(z){z.editor.settings.inline_styles=false});a.PluginManager.add("legacyoutput",function(z,H,y){z.on("init",function(){var B=a.explode(z.settings.font_size_style_values),m=z.schema;z.formatter.register({alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"left"}},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"center"}},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",
    attributes:{align:"right"}},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:true}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",
    styles:{textDecoration:"line-through"},exact:true}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return a.inArray(B,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});a.each("b,i,u,strike".split(","),function(t){m.addValidElements(t+"[*]")});m.getElementRule("font")||m.addValidElements("font[face|size|color|style]");a.each("p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img".split(","),
    function(t){(t=m.getElementRule(t))&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})});z.addButton("fontsizeselect",function(){var B=[];return z.$.each((z.settings.fontsize_formats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7").split(" "),function(m,t){var o=t,c=t,b=t.split("=");b.length>1&&(o=b[0],c=b[1]);B.push({text:o,value:c})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:B,fixedWidth:true,onPostRender:function(){var m=this;z.on("NodeChange",
    function(){var t;t=z.dom.getParent(z.selection.getNode(),"font");m.value(t?t.size:"")})},onclick:function(m){m.control.settings.value&&z.execCommand("FontSize",false,m.control.settings.value)}}});z.addButton("fontselect",function(){var B=[],m=function(t){t=t.replace(/;$/,"").split(";");for(var o=t.length;o--;)t[o]=t[o].split("=");return t}(z.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");
    return y.each(m,function(t,o){B.push({text:{raw:o[0]},value:o[1],textStyle:-1==o[1].indexOf("dings")?"font-family:"+o[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:B,fixedWidth:true,onPostRender:function(){var t=this;z.on("NodeChange",function(){var o;o=z.dom.getParent(z.selection.getNode(),"font");t.value(o?o.face:"")})},onselect:function(t){t.control.settings.value&&z.execCommand("FontName",false,t.control.settings.value)}}})})})(tinymce);
tinymce.PluginManager.add("layer",function(a){function z(y){do if(y.className&&-1!=y.className.indexOf("mceItemLayer"))return y;while(y=y.parentNode)}function H(y){var B,m,t=[],o=z(a.selection.getNode()),c=-1,b=-1;m=[];tinymce.walk(a.getBody(),function(f){1==f.nodeType&&/^(absolute|relative|static)$/i.test(f.style.position)&&m.push(f)},"childNodes");for(B=0;B<m.length;B++){t[B]=m[B].style.zIndex?parseInt(m[B].style.zIndex,10):0;0>c&&m[B]==o&&(c=B)}if(0>y){for(B=0;B<t.length;B++)if(t[B]<t[c]){b=B;
    break}b>-1?(m[c].style.zIndex=t[b],m[b].style.zIndex=t[c]):t[c]>0&&(m[c].style.zIndex=t[c]-1)}else{for(B=0;B<t.length;B++)if(t[B]>t[c]){b=B;break}b>-1?(m[c].style.zIndex=t[b],m[b].style.zIndex=t[c]):m[c].style.zIndex=t[c]+1}a.execCommand("mceRepaint")}a.addCommand("mceInsertLayer",function(){var y=a.dom,B=y.getPos(y.getParent(a.selection.getNode(),"*")),m=a.getBody();a.dom.add(m,"div",{style:{position:"absolute",left:B.x,top:B.y>20?B.y:20,width:100,height:100},"class":"mceItemVisualAid mceItemLayer"},
    a.selection.getContent()||a.getLang("layer.content"));tinymce.Env.ie&&y.setHTML(m,m.innerHTML)});a.addCommand("mceMoveForward",function(){H(1)});a.addCommand("mceMoveBackward",function(){H(-1)});a.addCommand("mceMakeAbsolute",function(){var y=z(a.selection.getNode());y||(y=a.dom.getParent(a.selection.getNode(),"DIV,P,IMG"));y&&("absolute"==y.style.position.toLowerCase()?(a.dom.setStyles(y,{position:"",left:"",top:"",width:"",height:""}),a.dom.removeClass(y,"mceItemVisualAid"),a.dom.removeClass(y,
    "mceItemLayer")):(y.style.left||(y.style.left="20px"),y.style.top||(y.style.top="20px"),y.style.width||(y.style.width=y.width?y.width+"px":"100px"),y.style.height||(y.style.height=y.height?y.height+"px":"100px"),y.style.position="absolute",a.dom.setAttrib(y,"data-mce-style",""),a.addVisual(a.getBody())),a.execCommand("mceRepaint"),a.nodeChanged())});a.addButton("moveforward",{title:"layer.forward_desc",cmd:"mceMoveForward"});a.addButton("movebackward",{title:"layer.backward_desc",cmd:"mceMoveBackward"});
    a.addButton("absolute",{title:"layer.absolute_desc",cmd:"mceMakeAbsolute"});a.addButton("insertlayer",{title:"layer.insertlayer_desc",cmd:"mceInsertLayer"});a.on("init",function(){tinymce.Env.ie&&a.getDoc().execCommand("2D-Position",false,true)});a.on("mouseup",function(y){(y=z(y.target))&&a.dom.setAttrib(y,"data-mce-style","")});a.on("mousedown",function(y){var B;y=y.target;var m=a.getDoc();tinymce.Env.gecko&&(z(y)?"on"!==m.designMode&&(m.designMode="on",y=m.body,B=y.parentNode,B.removeChild(y),
        B.appendChild(y)):"on"==m.designMode&&(m.designMode="off"))});a.on("NodeChange",function(y){var B=a.dom;tinymce.each(B.select("div,p",y),function(m){/^(absolute|relative|fixed)$/i.test(m.style.position)&&(m.hasVisual?B.addClass(m,"mceItemVisualAid"):B.removeClass(m,"mceItemVisualAid"),B.addClass(m,"mceItemLayer"))})})});
tinymce.PluginManager.add("link",function(a){function z(B){return function(){var m=a.settings.link_list;"string"==typeof m?tinymce.util.XHR.send({url:m,success:function(t){B(tinymce.util.JSON.parse(t))}}):"function"==typeof m?m(B):B(m)}}function H(B,m,t){function o(c,b){return b=b||[],tinymce.each(c,function(f){var j={text:f.text||f.title};f.menu?j.menu=o(f.menu):(j.value=f.value,m&&m(j));b.push(j)}),b}return o(B,t||[])}function y(B){function m(p){var h=f.find("#text");(!h.value()||p.lastControl&&
h.value()==p.lastControl.text())&&h.value(p.control.text());f.find("#href").value(p.control.value())}function t(){!b&&0===q.text.length&&j&&this.parent().parent().find("#text")[0].value(this.value())}var o,c,b,f,j,e,g,i,k,A,w,C,q={},r=a.selection,d=a.dom;o=r.getNode();c=d.getParent(o,"a[href]");j=function(p){var h=r.getContent();if(/</.test(h)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(h)||-1==h.indexOf("href=")))return false;if(p){h=p.childNodes;if(0===h.length)return false;for(p=h.length-1;p>=0;p--)if(3!=
    h[p].nodeType)return false}return true}();q.text=b=c?c.innerText||c.textContent:r.getContent({format:"text"});q.href=c?d.getAttrib(c,"href"):"";c?q.target=d.getAttrib(c,"target"):a.settings.default_link_target&&(q.target=a.settings.default_link_target);(C=d.getAttrib(c,"rel"))&&(q.rel=C);(C=d.getAttrib(c,"class"))&&(q["class"]=C);(C=d.getAttrib(c,"title"))&&(q.title=C);j&&(e={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){q.text=this.value()}});B&&(g={type:"listbox",
    label:"Link list",values:H(B,function(p){p.value=a.convertURL(p.value||p.url,"href")},[{text:"None",value:""}]),onselect:m,value:a.convertURL(q.href,"href"),onPostRender:function(){g=this}});a.settings.target_list!==false&&(a.settings.target_list||(a.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),k={name:"target",type:"listbox",label:"Target",values:H(a.settings.target_list)});a.settings.rel_list&&(i={name:"rel",type:"listbox",label:"Rel",values:H(a.settings.rel_list)});
    a.settings.link_class_list&&(A={name:"class",type:"listbox",label:"Class",values:H(a.settings.link_class_list,function(p){p.value&&(p.textStyle=function(){return a.formatter.getCssText({inline:"a",classes:[p.value]})})})});a.settings.link_title!==false&&(w={name:"title",type:"textbox",label:"Title",value:q.title});f=a.windowManager.open({title:"Insert link",data:q,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:true,label:"Url",onchange:function(p){var h=p.meta||{};g&&g.value(a.convertURL(this.value(),
        "href"));tinymce.each(p.meta,function(n,s){f.find("#"+s).value(n)});h.text||t.call(this)},onkeyup:t},e,w,function(p){var h=[];return tinymce.each(a.dom.select("a:not([href])"),function(n){(n=n.name||n.id)&&h.push({text:n,value:"#"+n,selected:-1!=p.indexOf("#"+n)})}),h.length?(h.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:h,onselect:m}):void 0}(q.href),g,i,k,A],onSubmit:function(p){function h(l,D){var x=a.selection.getRng();window.setTimeout(function(){a.windowManager.confirm(l,
        function(u){a.selection.setRng(x);D(u)})},0)}function n(){var l={href:s,target:q.target?q.target:null,rel:q.rel?q.rel:null,"class":q["class"]?q["class"]:null,title:q.title?q.title:null};c?(a.focus(),j&&q.text!=b&&("innerText"in c?c.innerText=q.text:c.textContent=q.text),d.setAttribs(c,l),r.select(c),a.undoManager.add()):j?a.insertContent(d.createHTML("a",l,d.encode(q.text))):a.execCommand("mceInsertLink",false,l)}var s;return q=tinymce.extend(q,p.data),(s=q.href)?s.indexOf("@")>0&&-1==s.indexOf("//")&&
    -1==s.indexOf("mailto:")?void h("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(l){l&&(s="mailto:"+s);n()}):a.settings.link_assume_external_targets&&!/^\w+:/i.test(s)||!a.settings.link_assume_external_targets&&/^\s*www\./i.test(s)?void h("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(l){l&&(s="http://"+s);n()}):void n():void a.execCommand("unlink")}})}a.addButton("link",{icon:"link",
    tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:z(y),stateSelector:"a[href]"});a.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"});a.addShortcut("Meta+K","",z(y));a.addCommand("mceLink",z(y));this.showDialog=y;a.addMenuItem("link",{icon:"link",text:"Insert/edit link",shortcut:"Meta+K",onclick:z(y),stateSelector:"a[href]",context:"insert",prependToContext:true})});
tinymce.PluginManager.add("nonbreaking",function(a){var z=a.getParam("nonbreaking_force_tab");if(a.addCommand("mceNonBreaking",function(){a.insertContent(a.plugins.visualchars&&a.plugins.visualchars.state?'<span class="mce-nbsp"> </span>':" ");a.dom.setAttrib(a.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),a.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),a.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),z){var H=
    +z>1?+z:3;a.on("keydown",function(y){if(9==y.keyCode)if(!y.shiftKey){y.preventDefault();for(y=0;H>y;y++)a.execCommand("mceNonBreaking")}})}});
tinymce.PluginManager.add("lists",function(a){function z(B){return B&&/^(OL|UL|DL)$/.test(B.nodeName)}function H(B){return B&&!!a.schema.getTextBlockElements()[B.nodeName]}var y=this;a.on("init",function(){function B(d){function p(n){var s,l,D;l=d[n?"startContainer":"endContainer"];D=d[n?"startOffset":"endOffset"];1==l.nodeType&&(s=q.create("span",{"data-mce-type":"bookmark"}),l.hasChildNodes()?(D=Math.min(D,l.childNodes.length-1),n?l.insertBefore(s,l.childNodes[D]):q.insertAfter(s,l.childNodes[D])):
    l.appendChild(s),l=s,D=0);h[n?"startContainer":"endContainer"]=l;h[n?"startOffset":"endOffset"]=D}var h={};return p(true),d.collapsed||p(),h}function m(d){function p(n){function s(u){for(var v=u.parentNode.firstChild,E=0;v;){if(v==u)return E;(1!=v.nodeType||"bookmark"!=v.getAttribute("data-mce-type"))&&E++;v=v.nextSibling}return-1}var l,D,x;l=x=d[n?"startContainer":"endContainer"];D=d[n?"startOffset":"endOffset"];l&&(1==l.nodeType&&(D=s(l),l=l.parentNode,q.remove(x)),d[n?"startContainer":"endContainer"]=
    l,d[n?"startOffset":"endOffset"]=D)}p(true);p();var h=q.createRng();h.setStart(d.startContainer,d.startOffset);d.endContainer&&h.setEnd(d.endContainer,d.endOffset);r.setRng(h)}function t(d,p){var h,n,s,l=q.createFragment(),D=a.schema.getBlockElements();if(a.settings.forced_root_block&&(p=p||a.settings.forced_root_block),p&&(n=q.create(p),n.tagName===a.settings.forced_root_block&&q.setAttribs(n,a.settings.forced_root_block_attrs),l.appendChild(n)),d)for(;h=d.firstChild;){var x=h.nodeName;s||"SPAN"==
x&&"bookmark"==h.getAttribute("data-mce-type")||(s=true);D[x]?(l.appendChild(h),n=null):p?(n||(n=q.create(p),l.appendChild(n)),n.appendChild(h)):l.appendChild(h)}return a.settings.forced_root_block?s||tinymce.Env.ie&&!(tinymce.Env.ie>10)||n.appendChild(q.create("br",{"data-mce-bogus":"1"})):l.appendChild(q.create("br")),l}function o(){return tinymce.grep(r.getSelectedBlocks(),function(d){return/^(LI|DT|DD)$/.test(d.nodeName)})}function c(d,p,h){function n(x){tinymce.each(l,function(u){x.parentNode.insertBefore(u,
    p.parentNode)});q.remove(x)}var s,l,D;l=q.select('span[data-mce-type="bookmark"]',d);h=h||t(p);s=q.createRng();s.setStartAfter(p);s.setEndAfter(d);s=s.extractContents();for(D=s.firstChild;D;D=D.firstChild)if("LI"==D.nodeName&&q.isEmpty(D)){q.remove(D);break}q.isEmpty(s)||q.insertAfter(s,d);q.insertAfter(h,d);q.isEmpty(p.parentNode)&&n(p.parentNode);q.remove(p);q.isEmpty(d)&&q.remove(d)}function b(d){var p,h;if(p=d.nextSibling,p&&z(p)&&p.nodeName==d.nodeName){for(;h=p.firstChild;)d.appendChild(h);
    q.remove(p)}if(p=d.previousSibling,p&&z(p)&&p.nodeName==d.nodeName){for(;h=p.firstChild;)d.insertBefore(h,d.firstChild);q.remove(p)}}function f(d){tinymce.each(tinymce.grep(q.select("ol,ul",d)),function(p){var h,n=p.parentNode;"LI"==n.nodeName&&n.firstChild==p&&(h=n.previousSibling,h&&"LI"==h.nodeName&&(h.appendChild(p),q.isEmpty(n)&&q.remove(n)));z(n)&&(h=n.previousSibling,h&&"LI"==h.nodeName&&h.appendChild(p))})}function j(d){function p(l){q.isEmpty(l)&&q.remove(l)}var h,n=d.parentNode,s=n.parentNode;
    return"DD"==d.nodeName?(q.rename(d,"DT"),true):d.parentNode.firstChild==d&&d.parentNode.lastChild==d?("LI"==s.nodeName?(q.insertAfter(d,s),p(s),q.remove(n)):z(s)?q.remove(n,true):(s.insertBefore(t(d),n),q.remove(n)),true):d.parentNode.firstChild==d?("LI"==s.nodeName?(q.insertAfter(d,s),d.appendChild(n),p(s)):z(s)?s.insertBefore(d,n):(s.insertBefore(t(d),n),q.remove(d)),true):d.parentNode.lastChild==d?("LI"==s.nodeName?q.insertAfter(d,s):z(s)?q.insertAfter(d,n):(q.insertAfter(t(d),n),q.remove(d)),
        true):("LI"==s.nodeName?(n=s,h=t(d,"LI")):h=z(s)?t(d,"LI"):t(d),c(n,d,h),f(n.parentNode),true)}function e(d){function p(s,l){var D;if(z(s)){for(;D=d.lastChild.firstChild;)l.appendChild(D);q.remove(s)}}var h,n;return"DT"==d.nodeName?(q.rename(d,"DD"),true):(h=d.previousSibling,h&&z(h)?(h.appendChild(d),true):h&&"LI"==h.nodeName&&z(h.lastChild)?(h.lastChild.appendChild(d),p(d.lastChild,h.lastChild),true):(h=d.nextSibling,h&&z(h)?(h.insertBefore(d,h.firstChild),true):h&&"LI"==h.nodeName&&z(d.lastChild)?
    false:(h=d.previousSibling,h&&"LI"==h.nodeName?(n=q.create(d.parentNode.nodeName),h.appendChild(n),n.appendChild(d),p(d.lastChild,n),true):false)))}function g(){var d=o();if(d.length){for(var p=B(r.getRng(true)),h=0;h<d.length&&(e(d[h])||0!==h);h++);return m(p),a.nodeChanged(),true}}function i(){var d=o();if(d.length){var p,h,n=B(r.getRng(true)),s=a.getBody();for(p=d.length;p--;)for(var l=d[p].parentNode;l&&l!=s;){for(h=d.length;h--;)if(d[h]===l){d.splice(p,1);break}l=l.parentNode}for(p=0;p<d.length&&
(j(d[p])||0!==p);p++);return m(n),a.nodeChanged(),true}}function k(d){var p=r.getRng(true),h=B(p),n="LI";d=d.toUpperCase();"DL"==d&&(n="DT");tinymce.each(function(){function s(F){var G;G=p[F?"startContainer":"endContainer"];F=p[F?"startOffset":"endOffset"];for(1==G.nodeType&&(G=G.childNodes[Math.min(F,G.childNodes.length-1)]||G);G.parentNode!=x;){if(H(G))break;if(/^(TD|TH)$/.test(G.parentNode.nodeName))break;G=G.parentNode}return G}for(var l,D=[],x=a.getBody(),u=s(true),v=s(),E=[];u&&(E.push(u),u!=
v);u=u.nextSibling);return tinymce.each(E,function(F){if(H(F))return D.push(F),void(l=null);if(q.isBlock(F)||"BR"==F.nodeName)return"BR"==F.nodeName&&q.remove(F),void(l=null);var G=F.nextSibling;return tinymce.dom.BookmarkManager.isBookmarkNode(F)&&(H(G)||!G&&F.parentNode==x)?void(l=null):(l||(l=q.create("p"),F.parentNode.insertBefore(l,F),D.push(l)),void l.appendChild(F))}),D}(),function(s){var l,D;(D=s.previousSibling)&&z(D)&&D.nodeName==d?(l=D,s=q.rename(s,n),D.appendChild(s)):(l=q.create(d),s.parentNode.insertBefore(l,
    s),l.appendChild(s),q.rename(s,n));b(l)});m(h)}function A(){var d=B(r.getRng(true)),p=a.getBody();tinymce.each(o(),function(h){var n,s;if(q.isEmpty(h))return void j(h);for(n=h;n&&n!=p;n=n.parentNode)z(n)&&(s=n);c(s,h)});m(d)}function w(d){var p=q.getParent(r.getStart(),"OL,UL,DL");if(p)if(p.nodeName==d)A(d);else{var h=B(r.getRng(true));b(q.rename(p,d));m(h)}else k(d)}function C(d){return function(){var p=q.getParent(a.selection.getStart(),"UL,OL,DL");return p&&p.nodeName==d}}var q=a.dom,r=a.selection;
    y.backspaceDelete=function(d){function p(D,x){var u,v,E=D.startContainer;u=D.startOffset;if(3==E.nodeType&&(x?u<E.data.length:u>0))return E;u=a.schema.getNonEmptyElements();for(v=new tinymce.dom.TreeWalker(D.startContainer);E=v[x?"next":"prev"]();){if("LI"==E.nodeName&&!E.hasChildNodes())return E;if(u[E.nodeName])return E;if(3==E.nodeType&&E.data.length>0)return E}}function h(D,x){var u,v,E=D.parentNode;if(z(x.lastChild)&&(v=x.lastChild),u=x.lastChild,u&&"BR"==u.nodeName&&D.hasChildNodes()&&q.remove(u),
        q.isEmpty(x)&&q.$(x).empty(),!q.isEmpty(D))for(;u=D.firstChild;)x.appendChild(u);v&&x.appendChild(v);q.remove(D);q.isEmpty(E)&&q.remove(E)}if(r.isCollapsed()){var n=q.getParent(r.getStart(),"LI");if(n){var s=r.getRng(true),l=q.getParent(p(s,d),"LI");if(l&&l!=n){s=B(s);return d?h(l,n):h(n,l),m(s),true}if(!l&&!d&&A(n.parentNode.nodeName))return true}}};a.on("BeforeExecCommand",function(d){var p,h=d.command.toLowerCase();return"indent"==h?g():"outdent"==h&&i()&&(p=true),p?(a.fire("ExecCommand",{command:d.command}),
        d.preventDefault(),true):void 0});a.addCommand("InsertUnorderedList",function(){w("UL")});a.addCommand("InsertOrderedList",function(){w("OL")});a.addCommand("InsertDefinitionList",function(){w("DL")});a.addQueryStateHandler("InsertUnorderedList",C("UL"));a.addQueryStateHandler("InsertOrderedList",C("OL"));a.addQueryStateHandler("InsertDefinitionList",C("DL"));a.on("keydown",function(d){9!=d.keyCode||tinymce.util.VK.metaKeyPressed(d)||a.dom.getParent(a.selection.getStart(),"LI,DT,DD")&&(d.preventDefault(),
        d.shiftKey?i():g())})});a.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var B=this;a.on("nodechange",function(){for(var m=a.selection.getSelectedBlocks(),t=false,o=0,c=m.length;!t&&c>o;o++){t=m[o].nodeName;t="LI"==t&&m[o].parentNode.firstChild==m[o]||"UL"==t||"OL"==t||"DD"==t}B.disabled(t)})}});a.on("keydown",function(B){B.keyCode==tinymce.util.VK.BACKSPACE?y.backspaceDelete()&&B.preventDefault():B.keyCode==tinymce.util.VK.DELETE&&y.backspaceDelete(true)&&
B.preventDefault()})});
tinymce.PluginManager.add("media",function(a,z){function H(e){return e=e.toLowerCase(),-1!=e.indexOf(".mp3")?"audio/mpeg":-1!=e.indexOf(".wav")?"audio/wav":-1!=e.indexOf(".mp4")?"video/mp4":-1!=e.indexOf(".webm")?"video/webm":-1!=e.indexOf(".ogg")?"video/ogg":-1!=e.indexOf(".swf")?"application/x-shockwave-flash":""}function y(e){var g=a.settings.media_scripts;if(g)for(var i=0;i<g.length;i++)if(-1!==e.indexOf(g[i].filter))return g[i]}function B(){function e(q){var r,d,p,h;r=g.find("#width")[0];d=g.find("#height")[0];
    p=r.value();h=d.value();g.find("#constrain")[0].checked()&&i&&k&&p&&h&&(q.control==r?(h=Math.round(p/i*h),isNaN(h)||d.value(h)):(p=Math.round(h/k*p),isNaN(p)||r.value(p)));i=p;k=h}var g,i,k,A,w=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:true,label:"Source",onchange:function(q){tinymce.each(q.meta,function(r,d){g.find("#"+d).value(r)})}}];a.settings.media_alt_source!==false&&w.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"});a.settings.media_poster!==
false&&w.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"});a.settings.media_dimensions!==false&&w.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:true,text:"Constrain proportions"}]});A=o(a.selection.getNode());
    i=A.width;k=A.height;var C={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:a.selection.getNode().getAttribute("data-mce-object")?a.selection.getContent():void 0,multiline:true,label:"Source"};C[j]=function(){A=t(this.value());this.parent().parent().fromJSON(A)};g=a.windowManager.open({title:"Insert/edit video",data:A,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){A=t(this.next().find("#embed").value());this.fromJSON(A)},items:w},{title:"Embed",type:"panel",
        layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(m(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},C]}],onSubmit:function(){var q,r,d,p;q=a.dom.select("img[data-mce-object]");a.insertContent(m(this.toJSON()));r=a.dom.select("img[data-mce-object]");for(d=0;d<q.length;d++)for(p=r.length-1;p>=0;p--)q[d]==r[p]&&r.splice(p,1);a.selection.select(r[0]);a.nodeChanged()}})}function m(e){var g=
    "";if(!e.source1&&(tinymce.extend(e,t(e.embed)),!e.source1))return"";if(e.source2||(e.source2=""),e.poster||(e.poster=""),e.source1=a.convertURL(e.source1,"source"),e.source2=a.convertURL(e.source2,"source"),e.source1mime=H(e.source1),e.source2mime=H(e.source2),e.poster=a.convertURL(e.poster,"poster"),e.flashPlayerUrl=a.convertURL(z+"/moxieplayer.swf","movie"),tinymce.each(f,function(k){var A,w,C;if(A=k.regex.exec(e.source1)){C=k.url;for(w=0;A[w];w++)C=C.replace("$"+w,function(){return A[w]});e.source1=
        C;e.type=k.type;e.width=e.width||k.w;e.height=e.height||k.h}}),e.embed)g=b(e.embed,e,true);else{var i=y(e.source1);i&&(e.type="script",e.width=i.width,e.height=i.height);e.width=e.width||300;e.height=e.height||150;tinymce.each(e,function(k,A){e[A]=a.dom.encode(k)});"iframe"==e.type?g+='<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"></iframe>':"application/x-shockwave-flash"==e.source1mime?(g+='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">',
e.poster&&(g+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),g+="</object>"):-1!=e.source1mime.indexOf("audio")?a.settings.audio_template_callback?g=a.settings.audio_template_callback(e):g+='<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" ></source>\n":"")+"</audio>":"script"==e.type?g+='<script src="'+e.source1+'"><\/script>':g=a.settings.video_template_callback?a.settings.video_template_callback(e):
'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" ></source>\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" ></source>\n":"")+"</video>"}return g}function t(e){var g={};return(new tinymce.html.SaxParser({validate:false,allow_conditional_comments:true,special:"script,noscript",start:function(i,k){if(g.source1||"param"!=i||(g.source1=
        k.map.movie),("iframe"==i||"object"==i||"embed"==i||"video"==i||"audio"==i)&&(g.type||(g.type=i),g=tinymce.extend(k.map,g)),"script"==i){var A=y(k.map.src);if(!A)return;g={type:"script",source1:k.map.src,width:A.width,height:A.height}}"source"==i&&(g.source1?g.source2||(g.source2=k.map.src):g.source1=k.map.src);"img"!=i||g.poster||(g.poster=k.map.src)}})).parse(e),g.source1=g.source1||g.src||g.data,g.source2=g.source2||"",g.poster=g.poster||"",g}function o(e){return e.getAttribute("data-mce-object")?
    t(a.serializer.serialize(e,{selection:true})):{}}function c(e){if(a.settings.media_filter_html===false)return e;var g=new tinymce.html.Writer;return(new tinymce.html.SaxParser({validate:false,allow_conditional_comments:false,special:"script,noscript",comment:function(i){g.comment(i)},cdata:function(i){g.cdata(i)},text:function(i,k){g.text(i,k)},start:function(i,k,A){if("script"!=i&&"noscript"!=i){for(var w=0;w<k.length;w++)if(0===k[w].name.indexOf("on"))return;g.start(i,k,A)}},end:function(i){"script"!=
i&&"noscript"!=i&&g.end(i)}},new tinymce.html.Schema({}))).parse(e),g.getContent()}function b(e,g,i){function k(q,r){var d,p,h,n;for(d in r)if(h=""+r[d],q.map[d])for(p=q.length;p--;){n=q[p];n.name==d&&(h?(q.map[d]=h,n.value=h):(delete q.map[d],q.splice(p,1)))}else h&&(q.push({name:d,value:h}),q.map[d]=h)}var A,w=new tinymce.html.Writer,C=0;return(new tinymce.html.SaxParser({validate:false,allow_conditional_comments:true,special:"script,noscript",comment:function(q){w.comment(q)},cdata:function(q){w.cdata(q)},
    text:function(q,r){w.text(q,r)},start:function(q,r,d){switch(q){case "video":case "object":case "embed":case "img":case "iframe":k(r,{width:g.width,height:g.height})}if(i)switch(q){case "video":k(r,{poster:g.poster,src:""});g.source2&&k(r,{src:""});break;case "iframe":k(r,{src:g.source1});break;case "source":if(C++,2>=C&&(k(r,{src:g["source"+C],type:g["source"+C+"mime"]}),!g["source"+C]))return;break;case "img":if(!g.poster)return;A=true}w.start(q,r,d)},end:function(q){if("video"==q&&i)for(var r=
        1;2>=r;r++)if(g["source"+r]){var d=[];d.map={};r>C&&(k(d,{src:g["source"+r],type:g["source"+r+"mime"]}),w.start("source",d,true))}if(g.poster&&"object"==q&&i&&!A){r=[];r.map={};k(r,{src:g.poster,width:g.width,height:g.height});w.start("img",r,true)}w.end(q)}},new tinymce.html.Schema({}))).parse(e),w.getContent()}var f=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$1"},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$2"},
    {regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc"},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&byline=0"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"'}],j=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";a.on("ResolveName",function(e){var g;1==e.target.nodeType&&
(g=e.target.getAttribute("data-mce-object"))&&(e.name=g)});a.on("preInit",function(){var e=a.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(i){e[i]=RegExp("</"+i+"[^>]*>","gi")});var g=a.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(i){g[i]={}});a.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(i,k){for(var A,w,C,q,r,d,p,h=i.length;h--;)if(w=i[h],w.parent&&("script"!=
    w.name||(p=y(w.attr("src"))))){C=new tinymce.html.Node("img",1);C.shortEnded=true;p&&(p.width&&w.attr("width",p.width.toString()),p.height&&w.attr("height",p.height.toString()));d=w.attributes;for(A=d.length;A--;){q=d[A].name;r=d[A].value;"width"!==q&&"height"!==q&&"style"!==q&&(("data"==q||"src"==q)&&(r=a.convertURL(r,q)),C.attr("data-mce-p-"+q,r))}(A=w.firstChild&&w.firstChild.value)&&(C.attr("data-mce-html",escape(A)),C.firstChild=null);C.attr({width:w.attr("width")||"300",height:w.attr("height")||
("audio"==k?"30":"150"),style:w.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":k,"class":"mce-object mce-object-"+k});w.replace(C)}});a.serializer.addAttributeFilter("data-mce-object",function(i,k){for(var A,w,C,q,r,d,p=i.length;p--;)if(A=i[p],A.parent){d=A.attr(k);w=new tinymce.html.Node(d,1);"audio"!=d&&"script"!=d&&w.attr({width:A.attr("width"),height:A.attr("height")});w.attr({style:A.attr("style")});q=A.attributes;for(C=q.length;C--;){var h=q[C].name;0===h.indexOf("data-mce-p-")&&
w.attr(h.substr(11),q[C].value)}"script"==d&&w.attr("type","text/javascript");(C=A.attr("data-mce-html"))&&(r=new tinymce.html.Node("#text",3),r.raw=true,r.value=c(unescape(C)),w.append(r));A.replace(w)}})});a.on("ObjectSelected",function(e){var g=e.target.getAttribute("data-mce-object");("audio"==g||"script"==g)&&e.preventDefault()});a.on("objectResized",function(e){var g,i=e.target;i.getAttribute("data-mce-object")&&(g=i.getAttribute("data-mce-html"),g&&(g=unescape(g),i.setAttribute("data-mce-html",
    escape(b(g,{width:e.width,height:e.height})))))});a.addButton("media",{tooltip:"Insert/edit video",onclick:B,stateSelector:["img[data-mce-object=video]","img[data-mce-object=iframe]"]});a.addMenuItem("media",{icon:"media",text:"Insert/edit video",onclick:B,context:"insert",prependToContext:true})});
